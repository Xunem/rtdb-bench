!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=6)}([function(t,e,r){var n=r(4),i=r(5),o=i;o.v1=n,o.v4=i,t.exports=o},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,i=r;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}},,function(t,e,r){var n,i,o=r(1),s=r(2),a=0,u=0;t.exports=function(t,e,r){var c=e&&r||0,h=e||[],l=(t=t||{}).node||n,f=void 0!==t.clockseq?t.clockseq:i;if(null==l||null==f){var d=o();null==l&&(l=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:u+1,y=p-a+(v-u)/1e4;if(y<0&&void 0===t.clockseq&&(f=f+1&16383),(y<0||p>a)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=v,i=f;var b=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;h[c++]=b>>>24&255,h[c++]=b>>>16&255,h[c++]=b>>>8&255,h[c++]=255&b;var m=p/4294967296*1e4&268435455;h[c++]=m>>>8&255,h[c++]=255&m,h[c++]=m>>>24&15|16,h[c++]=m>>>16&255,h[c++]=f>>>8|128,h[c++]=255&f;for(var w=0;w<6;++w)h[c+w]=l[w];return e||s(h)}},function(t,e,r){var n=r(1),i=r(2);t.exports=function(t,e,r){var o=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||i(s)}},function(t,e,r){"use strict";r.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function o(t){return"function"==typeof t}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function u(t){setTimeout(function(){throw t})}var c={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete:function(){}},h=Array.isArray||function(t){return t&&"number"==typeof t.length};function l(t){return null!=t&&"object"==typeof t}var f,d={e:{}};function p(){try{return f.apply(this,arguments)}catch(t){return d.e=t,d}}function v(t){return f=t,p}function y(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}y.prototype=Object.create(Error.prototype);var b=y,m=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,u=n?n.length:0;r;)r.remove(this),r=++a<u&&n[a]||null;if(o(i))v(i).call(this)===d&&(e=!0,t=t||(d.e instanceof b?w(d.e.errors):[d.e]));if(h(s))for(a=-1,u=s.length;++a<u;){var c=s[a];if(l(c))if(v(c.unsubscribe).call(c)===d){e=!0,t=t||[];var f=d.e;f instanceof b?t=t.concat(w(f.errors)):t.push(f)}}if(e)throw new b(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function w(t){return t.reduce(function(t,e){return t.concat(e instanceof b?e.errors:e)},[])}var x="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",g=function(t){function e(e,r,n){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=c;break;case 1:if(!e){i.destination=c;break}if("object"==typeof e){if(function(t){return t instanceof g||"_addParentTeardownLogic"in t&&t[x]}(e)){var o=e[x]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o._addParentTeardownLogic(i)}else i.syncErrorThrowable=!0,i.destination=new _(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new _(i,e,r,n)}return i}return i(e,t),e.prototype[x]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},e.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(m),_=function(t){function e(e,r,n,i){var s,a=t.call(this)||this;a._parentSubscriber=e;var u=a;return o(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==c&&(o((u=Object.create(r)).unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=s,a._error=n,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;u(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;u(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(u(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(g);var E="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function k(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:S}var T=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=function(t,e,r){if(t){if(t instanceof g)return t;if(t[x])return t[x]()}return t||e||r?new g(t,e,r):new g(c)}(t,e,r);if(n?n.call(i,this.source):i._addParentTeardownLogic(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=M(e))(function(e,n){var i;i=r.subscribe(function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}},n,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[E]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:k(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=M(t))(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();function M(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function I(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}I.prototype=Object.create(Error.prototype);var D=I,P=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(m),N=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return i(e,t),e}(g),O=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[x]=function(){return new N(this)},e.prototype.lift=function(t){var e=new C(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new D;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new D;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new D;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new D;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new D;return this.hasError?(t.error(this.thrownError),m.EMPTY):this.isStopped?(t.complete(),m.EMPTY):(this.observers.push(t),new P(this,t))},e.prototype.asObservable=function(){var t=new T;return t.source=this,t},e.create=function(t,e){return new C(t,e)},e}(T),C=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):m.EMPTY},e}(O),A=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(m))),j=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),q=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(function(t){function e(r,n){void 0===n&&(n=j.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(j)))(A),B=new T(function(t){return t.complete()});function V(t){return t?function(t){return new T(function(e){return t.schedule(function(){return e.complete()})})}(t):B}function Q(t){return t&&"function"==typeof t.schedule}var H=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.closed||e.complete()}};function L(t,e){return new T(e?function(r){var n=new m,i=0;return n.add(e.schedule(function(){i!==t.length?(r.next(t[i++]),r.closed||n.add(this.schedule())):r.complete()})),n}:H(t))}function R(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];switch(Q(r)?t.pop():r=void 0,t.length){case 0:return V(r);case 1:return r?L(t,r):function(t){var e=new T(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}(t[0]);default:return L(t,r)}}function Y(t){var e=t.error;t.subscriber.error(e)}var W=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return R(this.value);case"E":return function(t,e){return new T(e?function(r){return e.schedule(Y,0,{error:t,subscriber:r})}:function(e){return e.error(t)})}(this.error);case"C":return V()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var U=function(t){function e(e,r,n){void 0===n&&(n=0);var i=t.call(this,e)||this;return i.scheduler=r,i.delay=n,i}return i(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new F(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(W.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(W.createError(t))},e.prototype._complete=function(){this.scheduleMessage(W.createComplete())},e}(g),F=function(){return function(t,e){this.notification=t,this.destination=e}}(),z=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var r=this._events;r.push(e),r.length>this._bufferSize&&r.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new J(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new D;if(this.isStopped||this.hasError?e=m.EMPTY:(this.observers.push(t),e=new P(this,t)),i&&t.add(t=new U(t,i)),r)for(var s=0;s<o&&!t.closed;s++)t.next(n[s]);else for(s=0;s<o&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||q).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(O),J=function(){return function(t,e){this.time=t,this.value=e}}(),G=function(t){function e(e,r,n){var i=t.call(this)||this;return i.parent=e,i.outerValue=r,i.outerIndex=n,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(g),K=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,u),e}};var X=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Z=function(t){return function(e){for(var r=t[X]();;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add(function(){r.return&&r.return()}),e}},$=function(t){return function(e){var r=t[E]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},tt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function et(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var rt=function(t){if(t instanceof T)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[E])return $(t);if(tt(t))return H(t);if(et(t))return K(t);if(t&&"function"==typeof t[X])return Z(t);var e=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(g);function it(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new ot(t,e))}}var ot=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new st(t,this.project,this.thisArg))},t}(),st=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(g);function at(t,e){if(!e)return t instanceof T?t:new T(rt(t));if(null!=t){if(function(t){return t&&"function"==typeof t[E]}(t))return function(t,e){return new T(e?function(r){var n=new m;return n.add(e.schedule(function(){var i=t[E]();n.add(i.subscribe({next:function(t){n.add(e.schedule(function(){return r.next(t)}))},error:function(t){n.add(e.schedule(function(){return r.error(t)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n}:$(t))}(t,e);if(et(t))return function(t,e){return new T(e?function(r){var n=new m;return n.add(e.schedule(function(){return t.then(function(t){n.add(e.schedule(function(){r.next(t),n.add(e.schedule(function(){return r.complete()}))}))},function(t){n.add(e.schedule(function(){return r.error(t)}))})})),n}:K(t))}(t,e);if(tt(t))return L(t,e);if(function(t){return t&&"function"==typeof t[X]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new T(e?function(r){var n,i=new m;return i.add(function(){n&&"function"==typeof n.return&&n.return()}),i.add(e.schedule(function(){n=t[X](),i.add(e.schedule(function(){if(!r.closed){var t,e;try{var i=n.next();t=i.value,e=i.done}catch(t){return void r.error(t)}e?r.complete():(r.next(t),this.schedule())}}))})),i}:Z(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var ut=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new ct(t,this.project,this.concurrent))},t}(),ct=function(t){function e(e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=new G(this,void 0,void 0);this.add(n),function(t,e,r,n,i){if(void 0===i&&(i=new G(t,r,n)),!i.closed)rt(e)(i)}(this,t,e,r,n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(nt);function ht(t){return t}function lt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof r?function(i){return i.pipe(t(function(t,n){return at(e(t,n)).pipe(it(function(e,i){return r(t,e,n,i)}))},n))}:("number"==typeof r&&(n=r),function(t){return t.lift(new ut(e,n))})}(ht,t)}function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return Q(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof T?t[0]:lt(r)(L(t,n))}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vt(t,e,r){return e&&pt(t.prototype,e),r&&pt(t,r),t}var yt=0,bt=1,mt=10,wt=40,xt=70,gt=80,_t=function(){function t(e,r,n){switch(dt(this,t),e){case bt:this.dbprov=new Et(r,n);break;case yt:this.dbprov=new St(r,n)}}return vt(t,[{key:"saveData",value:function(t){this.dbprov.saveData(t)}},{key:"doQuery",value:function(){return this.dbprov.doQuery()}},{key:"updateQuery",value:function(t){return this.dbprov.updateQuery(t)}},{key:"deleteAll",value:function(){this.dbprov.deleteAll()}}]),t}(),Et=function(){function t(e,r){dt(this,t),this.queryType=e,this.details=r,this.added=new z(40),this.removed=new z(40),this.setQuery()}return vt(t,[{key:"setQuery",value:function(){switch(this.queryType){case mt:this.query=DB.ServerData.find().descending("ts");break;case 20:case 30:this.query=DB.SensorData.find();break;case wt:break;case xt:var t=this.details.serverid.split("r")[1];this.query=firebase.database().ref("serverData/"+t+"/"+this.details.serverid).orderByChild("ts").limitToLast(this.details.limit);break;case 50:case 60:this.query=DB.SensorData.find();break;default:this.query=DB.SensorData.find()}}},{key:"doQuery",value:function(){var t=this;if(this.queryType==wt){var e=firebase.database().ref("serverData/"+this.details.room+"/");return this.query=[],e.on("child_added",function(e){var r=firebase.database().ref("serverData/"+t.details.room+"/"+e.key+"/").orderByChild("ts").limitToLast(1);r.on("child_added",function(e){t.added.next({matchType:"add",data:e.val()})}),r.on("child_removed",function(e){t.removed.next({matchType:"remove",data:e.val()})}),t.query.push(r)}),this.subscription=ft(this.added,this.removed),this.subscription}return this.addQuery=this.query.on("child_added",function(e){t.added.next({matchType:"add",data:e.val()})}),this.removeQuery=this.query.on("child_removed",function(e){t.removed.next({matchType:"remove",data:e.val()})}),this.subscription=ft(this.added,this.removed),this.subscription}},{key:"updateQuery",value:function(t){if(this.added=new z(40),this.removed=new z(40),this.queryType==wt){for(var e=0;e<this.query.length;e++)this.query[e].off();this.query=[]}else this.query.off();return this.details=t,this.setQuery(),this.doQuery()}},{key:"saveData",value:function(t){firebase.database().ref("serverData/"+t.room+"/"+t.sid).push().set({mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts})}},{key:"deleteAll",value:function(){firebase.database().ref("/serverData/").remove()}}]),t}(),St=function(){function t(e,r){dt(this,t),this.queryType=e,this.details=r,this.setQuery()}return vt(t,[{key:"setQuery",value:function(){switch(this.queryType){case mt:this.query=DB.ServerData.find().descending("ts");break;case 20:case 30:this.query=DB.SensorData.find();break;case wt:this.query=DB.ServerData.find().equal("serverroom",this.details.room).descending("ts").limit(20);break;case xt:this.query=DB.ServerData.find().equal("sid",this.details.serverid).descending("ts").limit(this.details.limit);break;case 50:case 60:this.query=DB.SensorData.find();break;default:this.query=DB.SensorData.find()}}},{key:"doQuery",value:function(){return this.subscription=at(this.query.eventStream()).pipe(it(function(t){return"add"===t.matchType?{matchType:"add",data:t.data}:"remove"===t.matchType?{matchType:"remove",data:t.data}:void 0})),this.subscription}},{key:"updateQuery",value:function(t){return this.details=t,this.setQuery(),this.doQuery()}},{key:"saveData",value:function(t){new DB.ServerData({mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts}).save()}},{key:"deleteAll",value:function(){var t=this;DB.ServerData.find().resultStream(function(e){var r=Array.from(e);t.delete(r,0)})}},{key:"delete",value:function(t,e){var r=this;e<t.length&&t[e].delete().then(function(){e++,r.delete(t,e)},function(){console.log("Problem")})}}]),t}(),kt=new Promise(function(t){firebase.initializeApp({apiKey:"AIzaSyAutXeruAGoGxOSuTQSxBH-iVxHoN9K56k",authDomain:"fir-demo-aa3d1.firebaseapp.com",databaseURL:"https://fir-demo-aa3d1.firebaseio.com",projectId:"fir-demo-aa3d1",storageBucket:"fir-demo-aa3d1.appspot.com",messagingSenderId:"801259432549"}),DB.connect("real-time-benchmark"),DB.ready().then(function(){t(!0)})}),Tt=r(0);function Mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var It=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.firebaseClient=new _t(bt,gt,{}),this.baqendClient=new _t(yt,gt,{}),this.insertRate=e,this.servers=[],this.serverCount,this.counter=0,this.initial=!0}return function(t,e,r){e&&Mt(t.prototype,e),r&&Mt(t,r)}(t,[{key:"setup",value:function(){console.log("init");var t={0:"freebsd",1:"ubuntu",2:"windows Server 2012",3:"windows Server 2016"},e=0,r=0;this.serverCount=40;for(var n=0;n<this.serverCount;n++){var i={};i.mid=Object(Tt.v4)(),i.os=t[e],i.rack=r,i.unit=n%5,n<this.serverCount/2?i.room=1:i.room=2,i.sid="r"+i.room+"r"+i.rack+"u"+i.unit,(n+1)%4==0&&(e=(e+1)%4),(n+1)%5==0&&(r=(r+1)%4);var o=Math.random();i.temp=40*o+25,i.cpu=50*o+50,i.ts=Date.now(),this.servers.push(i),this.firebaseClient.saveData(i),this.baqendClient.saveData(i)}}},{key:"start",value:function(){var t=this;this.initial&&(this.setup(),this.initial=!1),this.refreshIntervalId=setInterval(function(){for(var e=0;e<t.insertRate;e++){var r=t.servers[t.counter],n={mid:Object(Tt.v4)(),sid:r.sid,room:r.room,rack:r.rack,unit:r.unit,os:r.os},i=100*Math.random(),o=Math.floor(i)%2;r.temp=i<80?0==o?Math.min(r.temp+i/100,90):Math.max(r.temp-i/100,25):0==o?Math.min(r.temp+i%10,90):Math.max(r.temp-i%10,25),n.temp=r.temp,n.cpu=r.cpu,n.ts=Date.now(),console.log(JSON.stringify(n)),t.counter=(t.counter+1)%t.serverCount,t.firebaseClient.saveData(n),t.baqendClient.saveData(n)}},1e3)}},{key:"stop",value:function(){clearInterval(this.refreshIntervalId)}},{key:"reset",value:function(){this.baqendClient.deleteAll(),this.firebaseClient.deleteAll(),this.initial=!0}}]),t}();function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.serverData=new Map,this.Dbinterface=new _t(yt,mt,{})}return function(t,e,r){e&&Pt(t.prototype,e),r&&Pt(t,r)}(t,[{key:"init",value:function(){var t=this;this.anctx=document.getElementById("ov_ba_cvs").getContext("2d"),this.subscription=this.Dbinterface.doQuery().subscribe(function(e){return t.handleEvent(e)},function(t){return console.log("onError: %s",JSON.stringify(t))},function(){return console.log("onCompleted")}),this.redraw()}},{key:"redraw",value:function(){this.anctx.clearRect(0,0,this.anctx.canvas.width,this.anctx.canvas.height)}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverData.set(t.mid,t),this.redraw(),this.calcHottest()}},{key:"remove",value:function(t){this.serverData.delete(t),this.redraw()}},{key:"calcHottest",value:function(){for(var t=Array.from(this.serverData,function(t){var e=Dt(t,2);e[0];return e[1]}),e=0,r="",n=0;n<t.length;n++)t[n].temp>e&&(e=t[n].temp,r=t[n].sid);this.controls.getHottestServer().next(r)}}]),t}();function Ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var At=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.provider=r,this.racks=4,this.units=5,this.hover="",this.serverData=new Map,this.serverDisplay=new Map,this.initial=!0,this.room="",e.getRoomNumber().subscribe(function(t){n.room=t,n.setDetails(),n.initial?(n.Dbinterface=new _t(n.provider,wt,{room:parseInt(t)}),n.subscription=n.Dbinterface.doQuery().subscribe(function(t){return n.handleEvent(t)},function(t){return console.log("Room, onError: %s",JSON.stringify(t))},function(){return console.log("onCompleted")}),n.initial=!1):(n.subscription.unsubscribe(),n.serverData=new Map,n.subscription=n.Dbinterface.updateQuery({room:parseInt(t)}).subscribe(function(t){return n.handleEvent(t)},function(t){return console.log("Room, onError: %s",JSON.stringify(t))},function(){return console.log("onCompleted")}))})}return function(t,e,r){e&&Ct(t.prototype,e),r&&Ct(t,r)}(t,[{key:"init",value:function(){var t,e=this;this.provider==yt?t=document.getElementById("rm_ba_cvs"):this.provider==bt&&(t=document.getElementById("rm_fb_cvs")),this.anctx=t.getContext("2d"),this.toolTip=document.getElementById("ToolTip"),this.redraw(),t.addEventListener("mousemove",function(r){var n=t.getBoundingClientRect(),i=e.anctx.canvas.width,o=e.anctx.canvas.height,s=Math.floor((o-60)/e.units),a=Math.floor((i-20)/e.racks),u=r.clientX-n.left,c=r.clientY-n.top,h=30+Math.floor(.2*s),l=30+Math.floor(.2*s)+5*s;if(c>h&&c<l&&(u>10+0*Math.floor(a)+Math.floor(.1*a)&&u<10+0*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+1*Math.floor(a)+Math.floor(.1*a)&&u<10+1*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+2*Math.floor(a)+Math.floor(.1*a)&&u<10+2*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+3*Math.floor(a)+Math.floor(.1*a)&&u<10+3*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+4*Math.floor(a)+Math.floor(.1*a)&&u<10+4*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a))){var f=Math.floor((u-10)/a),d=Math.floor((c-h)/s);e.hover="r"+e.room+"r"+f+"u"+d,t.style.cursor="pointer";var p=e.serverDisplay.get(e.hover);e.toolTip.style.top=r.pageY-10+"px",e.toolTip.style.left=r.pageX+20+"px",e.toolTip.innerHTML=e.hover+"<br>Temp: "+Math.floor(p.temp)+"Â°C<br>CPU: "+Math.floor(p.cpu)+"%",e.toolTip.style.display="block"}else e.hover="",e.toolTip.style.display="none",t.style.cursor="auto";e.redraw()}),t.addEventListener("click",function(t){e.hover&&(e.controls.getHottestServer().next(!1),e.controls.getServerId().next(e.hover))}),t.addEventListener("mouseout",function(){e.hover="",e.toolTip.style.display="none",t.style.cursor="auto",e.redraw()})}},{key:"redraw",value:function(){this.anctx.clearRect(0,0,this.anctx.canvas.width,this.anctx.canvas.height);for(var t=this.anctx.canvas.width,e=this.anctx.canvas.height,r=Math.floor((e-60)/this.units),n=Math.floor((t-20)/this.racks),i=0;i<this.racks;i++){for(var o=0;o<this.units;o++)this.anctx.beginPath(),this.anctx.moveTo(10+Math.floor(n)*i,30+r*o),this.anctx.lineTo(10+Math.floor(n)*i,30+r*(o+1)),this.anctx.lineTo(10+Math.floor(.1*n)+Math.floor(n)*i,30+r*(o+1)+Math.floor(.2*r)),this.anctx.lineTo(10+n*i+Math.floor(.9*n),30+r*(o+1)+Math.floor(.2*r)),this.anctx.stroke();this.anctx.lineTo(10+n*i+Math.floor(.9*n),30+Math.floor(.2*r)),this.anctx.lineTo(10+n*i+Math.floor(.9*n)-Math.floor(.1*n),30),this.anctx.lineTo(10+Math.floor(n)*i,30),this.anctx.fillStyle="rgba(198, 198, 198, 0.7)",this.anctx.fill(),this.anctx.stroke(),this.anctx.lineTo(10+Math.floor(.1*n)+Math.floor(n)*i,30+Math.floor(.2*r)),this.anctx.stroke()}for(var s=Array.from(this.serverData,function(t){var e=Ot(t,2);e[0];return e[1]}),a=0;a<s.length;a++){this.hover===s[a].sid?this.anctx.fillStyle="RED":this.anctx.fillStyle="#E1E1E1",this.anctx.beginPath(),this.anctx.strokeStyle="BLACK";var u=10+Math.floor(n)*s[a].rack+Math.floor(.1*n),c=30+r*s[a].unit+Math.floor(.2*r),h=Math.floor(.8*n),l=r;this.anctx.rect(u,c,h,l),this.anctx.fill(),this.anctx.stroke(),this.anctx.beginPath(),this.anctx.rect(u+Math.floor(.25*h),c+Math.floor(.25*l),Math.floor(.25*h),Math.floor(.5*l));var f=65,d=s[a].temp-25;if(d>f/2){var p=(d-=f/2)/(f/2),v="rgb(255,"+(255-Math.floor(255*p))+",0)";this.anctx.fillStyle=v}else{var y=d/(f/2),b="rgb("+Math.floor(255*y)+",255,0)";this.anctx.fillStyle=b}if(this.anctx.fill(),this.anctx.stroke(),this.anctx.beginPath(),this.anctx.rect(u+Math.floor(.5*h),c+Math.floor(.25*l),Math.floor(.25*h),Math.floor(.5*l)),f=50,(d=s[a].cpu-50)>f/2){var m=(d-=f/2)/(f/2),w="rgb(255,"+(255-Math.floor(255*m))+",0)";this.anctx.fillStyle=w}else{var x=d/(f/2),g="rgb("+Math.floor(255*x)+",255,0)";this.anctx.fillStyle=g}this.anctx.fill(),this.anctx.stroke()}0==s.length&&(this.anctx.fillStyle="rgba(198, 198, 198, 0.9)",this.anctx.fillRect(0,0,this.anctx.canvas.width,this.anctx.canvas.height))}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverDisplay.set(t.sid,{cpu:t.cpu,temp:t.temp}),this.serverData.set(t.mid,t),this.redraw()}},{key:"remove",value:function(t){this.serverData.delete(t),this.redraw()}},{key:"setDetails",value:function(){document.getElementById("room_details").innerHTML="Room "+this.room}}]),t}();function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Bt=function(){function t(e,r,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.provider=r,this.initial=!0,this.serverid=n,this.limit=25,this.serverData=new Map,this.temp={},e.getServerId().subscribe(function(t){t&&(i.serverid=t,i.setDetails(),i.initial?(i.Dbinterface=new _t(i.provider,xt,{serverid:i.serverid,limit:i.limit}),i.subscription=i.Dbinterface.doQuery().subscribe(function(t){return i.handleEvent(t)},function(t){return console.log("onError: %s",JSON.stringify(t))},function(){return console.log("onCompleted")}),i.initial=!1):(i.subscription.unsubscribe(),i.serverData=new Map,i.subscription=i.Dbinterface.updateQuery({serverid:i.serverid,limit:i.limit}).subscribe(function(t){return i.handleEvent(t)},function(t){return console.log("onError: %s",JSON.stringify(t))},function(){return console.log("onCompleted")})))})}return function(t,e,r){e&&qt(t.prototype,e),r&&qt(t,r)}(t,[{key:"init",value:function(){this.provider==yt?this.anctx=document.getElementById("srv_ba_cvs").getContext("2d"):this.provider==bt&&(this.anctx=document.getElementById("srv_fb_cvs").getContext("2d")),this.redraw()}},{key:"redraw",value:function(){this.anctx.clearRect(0,0,this.anctx.canvas.width,this.anctx.canvas.height);var t=Array.from(this.serverData,function(t){var e=jt(t,2);e[0];return e[1]}),e=this.anctx.canvas.width,r=this.anctx.canvas.height,n=Math.floor((e-20)/(this.limit-1));t.sort(function(t,e){return e.ts-t.ts}),this.anctx.beginPath(),this.anctx.moveTo(0,75),this.anctx.lineTo(e,75),this.anctx.lineWidth=1,this.anctx.strokeStyle="#bababa",this.anctx.stroke(),this.anctx.beginPath(),this.anctx.moveTo(0,150),this.anctx.lineTo(e,150),this.anctx.stroke(),this.anctx.beginPath(),this.anctx.moveTo(0,225),this.anctx.lineTo(e,225),this.anctx.stroke();for(var i=0;i<t.length;i++)i>0&&(this.anctx.beginPath(),this.anctx.moveTo(e-10-(i-1)*n,r-3*Math.floor(t[i-1].temp)),this.anctx.lineWidth=2,this.anctx.strokeStyle="#ff9d00",this.anctx.lineTo(e-10-i*n,r-3*Math.floor(t[i].temp)),this.anctx.stroke(),this.anctx.beginPath(),this.anctx.moveTo(e-10-(i-1)*n,r-3*Math.floor(t[i-1].cpu)),this.anctx.lineWidth=2,this.anctx.strokeStyle="#0007d3",this.anctx.lineTo(e-10-i*n,r-3*Math.floor(t[i].cpu)),this.anctx.stroke()),this.anctx.beginPath(),this.anctx.arc(e-10-i*n,r-3*Math.floor(t[i].temp),4,0,2*Math.PI),this.anctx.strokeStyle="#ff9d00",this.anctx.fillStyle="#ff9d00",this.anctx.fill(),this.anctx.stroke(),this.anctx.beginPath(),this.anctx.arc(e-10-i*n,r-3*Math.floor(t[i].cpu),4,0,2*Math.PI),this.anctx.strokeStyle="#0007d3",this.anctx.fillStyle="#0007d3",this.anctx.fill(),this.anctx.stroke()}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverData.set(t.mid,t),this.redraw()}},{key:"remove",value:function(t){this.serverData.delete(t),console.log(this.serverData),this.redraw()}},{key:"setDetails",value:function(){document.getElementById("server_details").innerHTML="Server "+this.serverid}}]),t}(),Vt=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new D;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(O);function Qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ht=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hottestServer=new Vt,this.hottestServer.next(!0),this.roomNumber=new Vt,this.roomNumber.next(1),this.serverId=new Vt,this.serverLimit=new Vt,this.serverLimit.next(15)}return function(t,e,r){e&&Qt(t.prototype,e),r&&Qt(t,r)}(t,[{key:"getLimit",value:function(){return this.serverLimit}},{key:"getServerId",value:function(){return this.serverId}},{key:"getHottestServer",value:function(){return this.hottestServer}},{key:"getRoomNumber",value:function(){return this.roomNumber}}]),t}(),Lt=1;kt.then(function(t){var e=new Ht,r=new It(3),n=new Nt(e),i=new At(e,yt),o=new At(e,bt),s=new Bt(e,yt,"r2r2u0"),a=new Bt(e,bt,"r2r2u0");n.init(),i.init(),o.init(),s.init(),a.init(),document.getElementById("init").addEventListener("click",function(){r.setup()}),document.getElementById("start").addEventListener("click",function(){r.start()}),document.getElementById("stop").addEventListener("click",function(){r.stop()}),document.getElementById("reset").addEventListener("click",function(){r.reset()}),e.getHottestServer().subscribe(function(t){document.getElementById("hottest").checked=t});var u=document.getElementById("room");u.addEventListener("change",function(){u.value!=Lt&&(Lt=u.value,e.getRoomNumber().next(Lt))})})}]);