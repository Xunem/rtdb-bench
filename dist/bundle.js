!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=25)}([function(t,e,r){"use strict";r.d(e,"a",function(){return n});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function n(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}},function(t,e,r){"use strict";var i=r(30),n=r(0),s=r(14),o=r(4),a=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.scheduler=e,i.work=r,i}return n.a(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,i){return void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,i):e.flush(this)},e}(function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.scheduler=e,i.work=r,i.pending=!1,i}return n.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,i=void 0;try{this.work(t)}catch(t){r=!0,i=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return n.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(o.a))),c=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),u=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e}(function(t){function e(r,i){void 0===i&&(i=c.now);var n=t.call(this,r,function(){return e.delegate&&e.delegate!==n?e.delegate.now():i()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return n.a(e,t),e.prototype.schedule=function(r,i,n){return void 0===i&&(i=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,i,n):t.prototype.schedule.call(this,r,i,n)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(c)))(a),h=r(5),l=r(2),f=new l.a(function(t){return t.complete()});function d(t){return t?function(t){return new l.a(function(e){return t.schedule(function(){return e.complete()})})}(t):f}function p(t){return t&&"function"==typeof t.schedule}var v=function(t){return function(e){for(var r=0,i=t.length;r<i&&!e.closed;r++)e.next(t[r]);e.closed||e.complete()}};function m(t,e){return e?new l.a(function(r){var i=new o.a,n=0;return i.add(e.schedule(function(){n!==t.length?(r.next(t[n++]),r.closed||i.add(this.schedule())):r.complete()})),i}):new l.a(v(t))}function b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];switch(p(r)?t.pop():r=void 0,t.length){case 0:return d(r);case 1:return r?m(t,r):function(t){var e=new l.a(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}(t[0]);default:return m(t,r)}}function y(t){var e=t.error;t.subscriber.error(e)}var g=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return b(this.value);case"E":return function(t,e){return e?new l.a(function(r){return e.schedule(y,0,{error:t,subscriber:r})}):new l.a(function(e){return e.error(t)})}(this.error);case"C":return d()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var x=function(t){function e(e,r,i){void 0===i&&(i=0);var n=t.call(this,e)||this;return n.scheduler=r,n.delay=i,n}return n.a(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new w(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(g.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(g.createError(t))},e.prototype._complete=function(){this.scheduleMessage(g.createComplete())},e}(h.a),w=function(){return function(t,e){this.notification=t,this.destination=e}}(),S=r(8),E=r(15),T=function(t){function e(e,r,i){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=t.call(this)||this;return n.scheduler=i,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=e<1?1:e,n._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return n.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var r=this._events;r.push(e),r.length>this._bufferSize&&r.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new _(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,i=r?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,s=i.length;if(this.closed)throw new S.a;if(this.isStopped||this.hasError?e=o.a.EMPTY:(this.observers.push(t),e=new E.a(this,t)),n&&t.add(t=new x(t,n)),r)for(var a=0;a<s&&!t.closed;a++)t.next(i[a]);else for(a=0;a<s&&!t.closed;a++)t.next(i[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||u).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,n=i.length,s=0;s<n&&!(t-i[s].time<r);)s++;return n>e&&(s=Math.max(s,n-e)),s>0&&i.splice(0,s),i},e}(s.a),_=function(){return function(t,e){this.time=t,this.value=e}}(),C=function(t){function e(e,r,i){var n=t.call(this)||this;return n.parent=e,n.outerValue=r,n.outerIndex=i,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(h.a),M=r(9),k=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,M.a),e}};var D=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),O=function(t){return function(e){for(var r=t[D]();;){var i=r.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof r.return&&e.add(function(){r.return&&r.return()}),e}},L=r(7),P=function(t){return function(e){var r=t[L.a]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},I=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function N(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var A=r(13),j=function(t){if(t instanceof l.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[L.a])return P(t);if(I(t))return v(t);if(N(t))return k(t);if(t&&"function"==typeof t[D])return O(t);var e=Object(A.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e.prototype.notifyNext=function(t,e,r,i,n){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(h.a);function U(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new q(t,e))}}var q=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new V(t,this.project,this.thisArg))},t}(),V=function(t){function e(e,r,i){var n=t.call(this,e)||this;return n.project=r,n.count=0,n.thisArg=i||n,n}return n.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(h.a);function H(t,e){if(!e)return t instanceof l.a?t:new l.a(j(t));if(null!=t){if(function(t){return t&&"function"==typeof t[L.a]}(t))return function(t,e){return e?new l.a(function(r){var i=new o.a;return i.add(e.schedule(function(){var n=t[L.a]();i.add(n.subscribe({next:function(t){i.add(e.schedule(function(){return r.next(t)}))},error:function(t){i.add(e.schedule(function(){return r.error(t)}))},complete:function(){i.add(e.schedule(function(){return r.complete()}))}}))})),i}):new l.a(P(t))}(t,e);if(N(t))return function(t,e){return e?new l.a(function(r){var i=new o.a;return i.add(e.schedule(function(){return t.then(function(t){i.add(e.schedule(function(){r.next(t),i.add(e.schedule(function(){return r.complete()}))}))},function(t){i.add(e.schedule(function(){return r.error(t)}))})})),i}):new l.a(k(t))}(t,e);if(I(t))return m(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new l.a(function(r){var i,n=new o.a;return n.add(function(){i&&"function"==typeof i.return&&i.return()}),n.add(e.schedule(function(){i=t[D](),n.add(e.schedule(function(){if(!r.closed){var t,e;try{var n=i.next();t=n.value,e=n.done}catch(t){return void r.error(t)}e?r.complete():(r.next(t),this.schedule())}}))})),n}):new l.a(O(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var R=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Y(t,this.project,this.concurrent))},t}(),Y=function(t){function e(e,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var n=t.call(this,e)||this;return n.project=r,n.concurrent=i,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var i=new C(this,void 0,void 0);this.add(i),function(t,e,r,i,n){if(void 0===n&&(n=new C(t,r,i)),!n.closed)j(e)(n)}(this,t,e,r,i)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,i,n){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(B);function F(t){return t}function Q(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,r,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof r?function(n){return n.pipe(t(function(t,i){return H(e(t,i)).pipe(U(function(e,n){return r(t,e,i,n)}))},i))}:("number"==typeof r&&(i=r),function(t){return t.lift(new R(e,i))})}(F,t)}var z=function(){function t(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}return t.prototype.call=function(t,e){return e.subscribe(new W(t,this.accumulator,this.seed,this.hasSeed))},t}(),W=function(t){function e(e,r,i,n){var s=t.call(this,e)||this;return s.accumulator=r,s._seed=i,s.hasSeed=n,s.index=0,s}return n.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(h.a);function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function G(t,e,r){return e&&K(t.prototype,e),r&&K(t,r),t}r.d(e,"c",function(){return J}),r.d(e,"d",function(){return $}),r.d(e,"e",function(){return Z}),r.d(e,"g",function(){return tt}),r.d(e,"f",function(){return et}),r.d(e,"b",function(){return rt}),r.d(e,"h",function(){return it}),r.d(e,"j",function(){return nt}),r.d(e,"i",function(){return st}),r.d(e,"a",function(){return ot});var J=0,$=1,Z=10,tt=50,et=70,rt=80,it=100,nt=200,st=300,ot=function(){function t(e,r,i,n){switch(X(this,t),e){case $:this.dbprov=new at(r,i,n);break;case J:this.dbprov=new ct(r,i,n)}}return G(t,[{key:"saveData",value:function(t){this.dbprov.saveData(t)}},{key:"updateData",value:function(t){this.dbprov.updateData(t)}},{key:"doQuery",value:function(){return this.dbprov.doQuery()}},{key:"updateQuery",value:function(t){return this.dbprov.updateQuery(t)}},{key:"deleteAll",value:function(){this.dbprov.deleteAll()}},{key:"getLatency",value:function(){return this.dbprov.getLatency().pipe(U(function(t){return{sum:t||0,counter:0}}),function(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(i){return i.lift(new z(t,e,r))}}(function(t,e){return{sum:t.sum+e.sum,counter:t.counter+1}}),U(function(t){return t.counter?t.sum/t.counter:0}))}}]),t}(),at=function(){function t(e,r,n){X(this,t),this.fb_inst=e,this.latency=new i.a,this.queryType=r,this.details=n,this.added=new T(40),this.removed=new T(40),this.setQuery()}return G(t,[{key:"setQuery",value:function(){switch(this.queryType){case Z:if(this.query=this.query=this.fb_inst.database().ref("serverData/live/"),this.details.range)switch(this.details.range){case nt:this.query.orderByChild("temp").startAt(this.details.minTemp).endAt(this.details.maxTemp);break;case st:this.query.orderByChild("cpu").startAt(this.details.minCpu).endAt(this.details.maxCpu);break;case it:throw new Error("Query not supported")}break;case tt:this.query=this.query=this.fb_inst.database().ref("serverData/live/").orderByChild("serverroom").equalTo(this.details.room);break;case et:if(this.query=this.fb_inst.database().ref("serverData/all/"+this.details.serverid).orderByChild("ts").limitToLast(this.details.limit),this.details.offset>0)throw new Error("Query not supported")}}},{key:"doQuery",value:function(){var t=this;return this.addQuery=this.query.on("child_added",function(e){t.initialDataLoaded&&t.latency.next(Date.now()-e.val().ts),t.added.next({matchType:"add",data:e.val()})}),this.removeQuery=this.query.on("child_removed",function(e){t.removed.next({matchType:"remove",data:e.val()})}),this.query.once("value",function(e){t.initialDataLoaded=!0}),this.subscription=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,i=null,n=t[t.length-1];return p(n)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof n&&(r=t.pop()),null===i&&1===t.length&&t[0]instanceof l.a?t[0]:Q(r)(m(t,i))}(this.added,this.removed),this.subscription}},{key:"updateQuery",value:function(t){return this.added=new T(40),this.removed=new T(40),this.query.off(),this.initialDataLoaded=!1,this.details=t,this.setQuery(),this.doQuery()}},{key:"saveData",value:function(t){this.fb_inst.database().ref("serverData/live/"+t.mid).set({mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts}),this.fb_inst.database().ref("serverData/all/"+t.sid+"/"+t.mid).set({mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts})}},{key:"updateData",value:function(t){this.fb_inst.database().ref("serverData/live/"+t.mid).remove()}},{key:"deleteAll",value:function(){this.fb_inst.database().ref("/serverData/").remove()}},{key:"getLatency",value:function(){return this.latency}}]),t}(),ct=function(){function t(e,r,n){X(this,t),this.ba_inst=e,this.latency=new i.a,this.queryType=r,this.details=n,this.setQuery()}return G(t,[{key:"setQuery",value:function(){switch(this.queryType){case Z:if(this.query=this.ba_inst.ServerData.find().equal("live",!0),this.details.range)switch(this.details.range){case nt:this.query.between("temp",this.details.minTemp,this.details.maxTemp);break;case st:this.query.between("cpu",this.details.minCpu,this.details.maxCpu);break;case it:this.query.between("cpu",this.details.minCpu,this.details.maxCpu).between("temp",this.details.minTemp,this.details.maxTemp)}break;case tt:this.query=this.ba_inst.ServerData.find().equal("serverroom",this.details.room).equal("live",!0);break;case et:this.query=this.ba_inst.ServerData.find().equal("sid",this.details.serverid).descending("ts"),this.details.offset>0&&(this.query=this.query.offset(this.details.offset)),this.query=this.query.limit(this.details.limit)}}},{key:"doQuery",value:function(){var t=this;return this.subscription=H(this.query.eventStream()).pipe(U(function(e){if("add"===e.matchType){e.initial||t.latency.next(Date.now()-e.data.ts);var r={matchType:"add",data:e.data};return r.data.mid=r.data.id,r}if("remove"===e.matchType){var i={matchType:"remove",data:e.data};return i.data.mid=i.data.id,i}if("change"===e.matchType){var n={matchType:"change",data:e.data};return n.data.mid=n.data.id,n}})),this.subscription}},{key:"updateQuery",value:function(t){return this.details=t,this.setQuery(),this.doQuery()}},{key:"saveData",value:function(t){new this.ba_inst.ServerData({id:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts,live:t.live}).save()}},{key:"updateData",value:function(t){console.log(t),this.ba_inst.ServerData.load(t.mid).then(function(t){console.log(t),t.live=!1,t.update()})}},{key:"deleteAll",value:function(){var t=this;this.ba_inst.ServerData.find().count(function(e){e>0&&t.ba_inst.ServerData.find().resultList(function(e){e.forEach(function(t){t.delete()}),t.deleteAll()})})}},{key:"getLatency",value:function(){return this.latency}}]),t}()},function(t,e,r){"use strict";var i=r(5),n=r(10),s=r(11);var o=r(7);function a(){}function c(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:a}var u=r(6);r.d(e,"a",function(){return h});var h=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var o=this.operator,a=function(t,e,r){if(t){if(t instanceof i.a)return t;if(t[n.a])return t[n.a]()}return t||e||r?new i.a(t,e,r):new i.a(s.a)}(t,e,r);if(o?o.call(a,this.source):a._addParentTeardownLogic(this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=l(e))(function(e,i){var n;n=r.subscribe(function(e){try{t(e)}catch(t){i(t),n&&n.unsubscribe()}},i,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:c(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=l(t))(function(t,r){var i;e.subscribe(function(t){return i=t},function(t){return r(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e,r){"use strict";r.d(e,"e",function(){return s}),r.d(e,"c",function(){return o}),r.d(e,"d",function(){return a}),r.d(e,"b",function(){return c}),r.d(e,"a",function(){return u});var i=r(30);function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=25,o=90,a=0,c=100,u=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minTemp=new i.a,this.maxTemp=new i.a,this.minCpu=new i.a,this.maxCpu=new i.a,this.hottestServer=new i.a,this.hottestServer.next(!0),this.hottestServerId=new i.a,this.roomNumber=new i.a,this.roomNumber.next(1),this.serverId=new i.a,this.serverId.subscribe(function(t){e.current=t}),this.serverLimit=new i.a,this.serverLimit.next(15),this.serverOffset=new i.a}return function(t,e,r){e&&n(t.prototype,e),r&&n(t,r)}(t,[{key:"getServerLimit",value:function(){return this.serverLimit}},{key:"getServerOffset",value:function(){return this.serverOffset}},{key:"getServerId",value:function(){return this.serverId}},{key:"getHottestServer",value:function(){return this.hottestServer}},{key:"getRoomNumber",value:function(){return this.roomNumber}},{key:"getHottestServerId",value:function(){return this.hottestServerId}},{key:"getMinTemp",value:function(){return this.minTemp}},{key:"getMaxTemp",value:function(){return this.maxTemp}},{key:"getMinCpu",value:function(){return this.minCpu}},{key:"getMaxCpu",value:function(){return this.maxCpu}},{key:"setIfNotCurrent",value:function(t){t!==this.current&&this.serverId.next(t)}}]),t}()},function(t,e,r){"use strict";var i,n=Array.isArray||function(t){return t&&"number"==typeof t.length},s=r(13),o=r(12),a={e:{}};function c(){try{return i.apply(this,arguments)}catch(t){return a.e=t,a}}function u(t){return i=t,c}function h(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var l=h;r.d(e,"a",function(){return f});var f=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,i=this._parents,c=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,p=i?i.length:0;r;)r.remove(this),r=++f<p&&i[f]||null;if(Object(o.a)(c))u(c).call(this)===a&&(e=!0,t=t||(a.e instanceof l?d(a.e.errors):[a.e]));if(n(h))for(f=-1,p=h.length;++f<p;){var v=h[f];if(Object(s.a)(v))if(u(v.unsubscribe).call(v)===a){e=!0,t=t||[];var m=a.e;m instanceof l?t=t.concat(d(m.errors)):t.push(m)}}if(e)throw new l(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var i=r;(r=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function d(t){return t.reduce(function(t,e){return t.concat(e instanceof l?e.errors:e)},[])}},function(t,e,r){"use strict";r.d(e,"a",function(){return h});var i=r(0),n=r(12),s=r(11),o=r(4),a=r(10),c=r(6),u=r(9),h=function(t){function e(e,r,i){var n=t.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,n._parentSubscription=null,arguments.length){case 0:n.destination=s.a;break;case 1:if(!e){n.destination=s.a;break}if("object"==typeof e){if(f(e)){var o=e[a.a]();n.syncErrorThrowable=o.syncErrorThrowable,n.destination=o,o._addParentTeardownLogic(n)}else n.syncErrorThrowable=!0,n.destination=new l(n,e);break}default:n.syncErrorThrowable=!0,n.destination=new l(n,e,r,i)}return n}return i.a(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,r,i){var n=new e(t,r,i);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},e.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(o.a),l=function(t){function e(e,r,i,o){var a,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return Object(n.a)(r)?a=r:r&&(a=r.next,i=r.error,o=r.complete,r!==s.a&&(u=Object.create(r),Object(n.a)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=i,c._complete=o,c}return i.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=c.a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;Object(u.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.a.useDeprecatedSynchronousErrorHandling)throw t;Object(u.a)(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!c.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return c.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(u.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);function f(t){return t instanceof h||"_addParentTeardownLogic"in t&&t[a.a]}},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=!1,n={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;i=t},get useDeprecatedSynchronousErrorHandling(){return i}}},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,r){"use strict";function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}r.d(e,"a",function(){return n}),i.prototype=Object.create(Error.prototype);var n=i},function(t,e,r){"use strict";function i(t){setTimeout(function(){throw t})}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},function(t,e,r){"use strict";r.d(e,"a",function(){return s});var i=r(6),n=r(9),s={closed:!0,next:function(t){},error:function(t){if(i.a.useDeprecatedSynchronousErrorHandling)throw t;Object(n.a)(t)},complete:function(){}}},function(t,e,r){"use strict";function i(t){return"function"==typeof t}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";function i(t){return null!=t&&"object"==typeof t}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";r.d(e,"a",function(){return l});var i=r(0),n=r(2),s=r(5),o=r(4),a=r(8),c=r(15),u=r(10),h=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return i.a(e,t),e}(s.a),l=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.a(e,t),e.prototype[u.a]=function(){return new h(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,r=e.length,i=e.slice(),n=0;n<r;n++)i[n].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,i=e.slice(),n=0;n<r;n++)i[n].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),i=0;i<e;i++)r[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new c.a(this,t))},e.prototype.asObservable=function(){var t=new n.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(n.a),f=function(t){function e(e,r){var i=t.call(this)||this;return i.destination=e,i.source=r,i}return i.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.a.EMPTY},e}(l)},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=r(0),n=function(t){function e(e,r){var i=t.call(this)||this;return i.subject=e,i.subscriber=r,i.closed=!1,i}return i.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(r(4).a)},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i=new Promise(function(t){var e={};e.fb=firebase.initializeApp({apiKey:"AIzaSyAutXeruAGoGxOSuTQSxBH-iVxHoN9K56k",authDomain:"fir-demo-aa3d1.firebaseapp.com",databaseURL:"https://fir-demo-aa3d1.firebaseio.com",projectId:"fir-demo-aa3d1",storageBucket:"fir-demo-aa3d1.appspot.com",messagingSenderId:"801259432549"}),e.ba=DB,e.ba.connect("real-time-benchmark"),e.ba.ready().then(function(){t(e)})})},function(t,e,r){var i=r(27),n=r(28),s=n;s.v1=i,s.v4=n,t.exports=s},function(t,e,r){"use strict";r.d(e,"a",function(){return a});var i=r(1),n=r(3);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],i=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.provider=r,this.controls=e,this.dbinstance=s,this.serverDisplay=new Map,this.errorMsg="No Data",this.hover="",this.offset=40,this.scaleX=6,this.scaleY=6,this.minTemp=n.e,this.minTempLine="",this.maxTemp=n.c,this.maxTempLine="",this.minCpu=n.d,this.minCpuLine="",this.maxCpu=n.b,this.maxCpuLine="",this.serverData=new Map,this.Dbinterface=new i.a(r,s,i.e,{}),this.initial=!0,this.hotMode=!0}return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r)}(t,[{key:"init",value:function(){var t=this;this.provider==i.c?(this.ctx=document.getElementById("ov_ba_cvs").getContext("2d"),this.latency=document.getElementById("latency_ov_ba")):this.provider==i.d&&(this.ctx=document.getElementById("ov_fb_cvs").getContext("2d"),this.latency=document.getElementById("latency_ov_fb")),this.cvs=this.ctx.canvas,this.toolTip=document.getElementById("ToolTip"),this.Dbinterface.getLatency().subscribe(function(e){t.latency.innerHTML="&Oslash; "+Math.round(e)+" ms"}),this.setSubscription(),this.controls.getMinTemp().subscribe(function(e){var r=Math.floor(e);r!=t.minTemp?t.minTempLine=r:t.minTempLine="",t.redraw()}),this.controls.getMaxTemp().subscribe(function(e){var r=Math.floor(e);r!=t.maxTemp?t.maxTempLine=r:t.maxTempLine="",t.redraw()}),this.controls.getMinCpu().subscribe(function(e){var r=Math.floor(e);r!=t.minCpu?t.minCpuLine=r:t.minCpuLine="",t.redraw()}),this.controls.getMaxCpu().subscribe(function(e){var r=Math.floor(e);r!=t.maxCpu?t.maxCpuLine=r:t.maxCpuLine="",t.redraw()}),this.controls.getHottestServer().subscribe(function(e){t.hotMode=e}),this.cvs.addEventListener("mousemove",function(e){if(t.serverData.size>0){var r=t.cvs.getBoundingClientRect(),i=e.clientX-r.left,n=e.clientY-r.top,o=Array.from(t.serverDisplay,function(t){var e=s(t,2);e[0];return e[1]});o.sort(function(t,e){return t.cpu-e.cpu});for(var a="",c=0;c<o.length;c++){var u=t.getDisplayPositionX(o[c].cpu),h=t.getDisplayPositionY(o[c].temp),l=10;t.hover===o[c].sid&&(l=12),i>u-l&&i<u+l&&n>h-l&&n<h+l&&(a=o[c].sid)}if(t.hover=a,t.hover){t.cvs.style.cursor="pointer";var f=t.serverDisplay.get(t.hover);t.toolTip.style.top=e.pageY-10+"px",t.toolTip.style.left=e.pageX+20+"px",t.toolTip.innerHTML=t.hover+"<br>Temp: "+Math.floor(f.temp)+"°C<br>CPU: "+Math.floor(f.cpu)+"%",t.toolTip.style.display="block"}else t.cvs.style.cursor="default",t.toolTip.style.display="none";t.redraw()}}),this.cvs.addEventListener("click",function(e){t.hover&&(t.controls.getHottestServer().next(!1),t.controls.setIfNotCurrent(t.hover))}),this.cvs.addEventListener("mouseout",function(){t.hover="",t.toolTip.style.display="none",t.cvs.style.cursor="auto",t.redraw()}),this.redraw(),this.setDetails()}},{key:"subscribe",value:function(){var t=this;this.errorMsg="No Data",this.serverDisplay=new Map,this.serverData=new Map,this.minTempLine="",this.maxTempLine="",this.minCpuLine="",this.maxCpuLine="",this.redraw(),this.setDetails(),this.subscription=this.subquery.subscribe(function(e){return t.handleEvent(e)},function(e){console.log("Error in Overviewclient: %s",JSON.stringify(e)),t.subscription.unsubscribe(),t.subscribe()},function(){return console.log("onCompleted")})}},{key:"getDisplayPositionX",value:function(t){var e=this.maxCpu-this.minCpu,r=(t-this.minCpu)/e,i=this.ctx.canvas.width-2*this.offset;return this.offset+Math.floor(r*i)}},{key:"getDisplayPositionY",value:function(t){var e=this.maxTemp-this.minTemp,r=(t-this.minTemp)/e,i=this.ctx.canvas.height-2*this.offset;return this.ctx.canvas.height-(this.offset+Math.floor(r*i))}},{key:"redraw",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.beginPath();var t=this.offset;if(this.ctx.textAlign="center",this.ctx.fillStyle="BLACK",this.ctx.font="bolder 16px Arial",this.ctx.save(),this.ctx.rotate(-Math.PI/2),this.ctx.textAlign="center",this.ctx.fillText("Temperature",-1*Math.floor(this.ctx.canvas.height/2),t-15),this.ctx.restore(),this.ctx.fillText("CPU",Math.floor(this.ctx.canvas.width/2),this.ctx.canvas.height-t+30),this.ctx.moveTo(t,this.ctx.canvas.height-t+10),this.ctx.fillText(this.minCpu+"%",t,this.ctx.canvas.height-t+30),this.ctx.fillText(this.maxCpu+"%",this.ctx.canvas.width-t,this.ctx.canvas.height-t+30),this.ctx.fillText(this.minTemp+"°",t/2,this.ctx.canvas.height-t+3),this.ctx.fillText(this.maxTemp+"°",t/2,t+3),this.ctx.lineWidth=3,this.ctx.lineTo(t,t),this.ctx.lineTo(t-10,t),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t-10,this.ctx.canvas.height-t),this.ctx.lineWidth=3,this.ctx.lineTo(this.ctx.canvas.width-t,this.ctx.canvas.height-t),this.ctx.lineTo(this.ctx.canvas.width-t,this.ctx.canvas.height-t+10),this.ctx.stroke(),this.serverData.size>0){""!=this.minTempLine&&this.minTempLine>this.minTemp&&(this.ctx.beginPath(),this.ctx.moveTo(0,this.getDisplayPositionY(this.minTempLine)),this.ctx.lineTo(this.ctx.canvas.width,this.getDisplayPositionY(this.minTempLine)),this.ctx.stroke()),""!=this.maxTempLine&&this.maxTempLine<this.maxTemp&&(this.ctx.beginPath(),this.ctx.moveTo(0,this.getDisplayPositionY(this.maxTempLine)),this.ctx.lineTo(this.ctx.canvas.width,this.getDisplayPositionY(this.maxTempLine)),this.ctx.stroke()),""!=this.minCpuLine&&this.minCpuLine>this.minCpu&&(this.ctx.beginPath(),this.ctx.moveTo(this.getDisplayPositionX(this.minCpuLine),0),this.ctx.lineTo(this.getDisplayPositionX(this.minCpuLine),this.ctx.canvas.height),this.ctx.stroke()),""!=this.maxCpuLine&&this.maxCpuLine<this.maxCpu&&(this.ctx.beginPath(),this.ctx.moveTo(this.getDisplayPositionX(this.maxCpuLine),0),this.ctx.lineTo(this.getDisplayPositionX(this.maxCpuLine),this.ctx.canvas.height),this.ctx.stroke());var e=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]});e.sort(function(t,e){return t.cpu-e.cpu});for(var r=0;r<e.length;r++){this.ctx.beginPath();var i=10;this.ctx.fillStyle="#ff9d00",e[r].sid===this.hover&&(i=12,this.ctx.fillStyle="RED"),this.ctx.arc(this.getDisplayPositionX(e[r].cpu),this.getDisplayPositionY(e[r].temp),i,0,2*Math.PI),this.ctx.strokeStyle="BLACK",this.ctx.lineWidth=2,this.ctx.fill(),this.ctx.stroke()}}else this.ctx.beginPath(),this.ctx.fillStyle="rgba(198, 198, 198, 0.9)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="BLACK",this.ctx.textAlign="center",this.ctx.font="bolder 30px Arial",this.ctx.fillText(this.errorMsg,Math.floor(this.ctx.canvas.width/2),Math.floor(this.ctx.canvas.height/2))}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverDisplay.set(t.sid,t),this.serverData.set(t.mid,t),this.redraw(),this.calcHottest()}},{key:"remove",value:function(t){this.serverData.delete(t),console.log(this.serverData.size),this.redraw()}},{key:"calcHottest",value:function(){for(var t=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]}),e=0,r="",i=0;i<t.length;i++)t[i].temp>e&&(e=t[i].temp,r=t[i].sid);this.hotMode&&this.controls.setIfNotCurrent(r)}},{key:"updateFilter",value:function(){this.tempChanged=""!==this.minTempLine||""!==this.maxTempLine,this.cpuChanged=""!==this.minCpuLine||""!==this.maxCpuLine,this.minTemp=""!==this.minTempLine?this.minTempLine:this.minTemp,this.maxTemp=""!==this.maxTempLine?this.maxTempLine:this.maxTemp,this.minCpu=""!==this.minCpuLine?this.minCpuLine:this.minCpu,this.maxCpu=""!==this.maxCpuLine?this.maxCpuLine:this.maxCpu,this.setSubscription()}},{key:"setSubscription",value:function(){try{var t=this.minTemp==n.e&&this.maxTemp==n.c,e=this.minCpu==n.d&&this.maxCpu==n.b;this.tempChanged||this.cpuChanged||this.initial?t&&e?(this.initial?(this.subquery=this.Dbinterface.doQuery(),this.initial=!1):(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({})),this.subscribe()):t&&!e?(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:i.j,minTemp:this.minTemp,maxTemp:this.maxTemp}),this.subscribe()):!t&&e?(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:i.i,minCpu:this.minCpu,maxCpu:this.maxCpu}),this.subscribe()):(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:i.h,minTemp:this.minTemp,maxTemp:this.maxTemp,minCpu:this.minCpu,maxCpu:this.maxCpu}),this.subscribe()):console.log("Range not changed.")}catch(t){this.errorMsg=t.message,console.log(t),this.subscription.unsubscribe(),this.serverData=new Map,this.serverDisplay=new Map,this.redraw(),this.setDetails()}}},{key:"setDetails",value:function(){document.getElementById("overview_sql").innerHTML=this.getSQLString()}},{key:"getSQLString",value:function(){var t="SELECT * FROM ServerData<br>WHERE Live = true<br>";return this.minTemp!=n.e&&(t=t+"  AND Temperature > "+this.minTemp+"<br>"),this.maxTemp!=n.c&&(t=t+"  AND Temperature < "+this.maxTemp+"<br>"),this.minCpu!=n.d&&(t=t+"  AND CPU > "+this.minCpu+"<br>"),this.maxCpu!=n.b&&(t=t+"  AND CPU < "+this.maxCpu+"<br>"),t}}]),t}()},function(t,e,r){"use strict";r.d(e,"a",function(){return a});var i=r(1),n=r(3);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],i=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.provider=r,this.dbinstance=i,this.racks=4,this.units=5,this.hover="",this.serverData=new Map,this.serverDisplay=new Map,this.initial=!0,this.room=""}return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r)}(t,[{key:"init",value:function(){var t,e=this;this.provider==i.c?(t=document.getElementById("rm_ba_cvs"),this.latency=document.getElementById("latency_rm_ba")):this.provider==i.d&&(t=document.getElementById("rm_fb_cvs"),this.latency=document.getElementById("latency_rm_fb")),this.controls.getRoomNumber().subscribe(function(t){e.room=parseInt(t),e.setDetails(),e.initial?(e.Dbinterface=new i.a(e.provider,e.dbinstance,i.g,{room:e.room}),e.Dbinterface.getLatency().subscribe(function(t){e.latency.innerHTML="&Oslash; "+Math.round(t)+" ms"}),e.subscribe(e.initial),e.initial=!1):(e.subscription.unsubscribe(),e.serverData=new Map,e.subscribe(!1))}),this.ctx=t.getContext("2d"),this.toolTip=document.getElementById("ToolTip"),this.redraw(),t.addEventListener("mousemove",function(r){if(e.serverData.size>0){var i=t.getBoundingClientRect(),n=e.ctx.canvas.width,s=e.ctx.canvas.height,o=Math.floor((s-60)/e.units),a=Math.floor((n-20)/e.racks),c=r.clientX-i.left,u=r.clientY-i.top,h=30+Math.floor(.2*o),l=30+Math.floor(.2*o)+5*o;if(u>h&&u<l&&(c>10+0*Math.floor(a)+Math.floor(.1*a)&&c<10+0*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||c>10+1*Math.floor(a)+Math.floor(.1*a)&&c<10+1*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||c>10+2*Math.floor(a)+Math.floor(.1*a)&&c<10+2*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||c>10+3*Math.floor(a)+Math.floor(.1*a)&&c<10+3*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||c>10+4*Math.floor(a)+Math.floor(.1*a)&&c<10+4*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a))){var f=Math.floor((c-10)/a),d=Math.floor((u-h)/o),p="r"+e.room+"r"+f+"u"+d,v=e.getServerData(p);console.log(v),v?(e.hover=p,t.style.cursor="pointer",e.toolTip.style.top=r.pageY-10+"px",e.toolTip.style.left=r.pageX+20+"px",e.toolTip.innerHTML=e.hover+"<br>Temp: "+Math.floor(v.temp)+"°C<br>CPU: "+Math.floor(v.cpu)+"%",e.toolTip.style.display="block"):(e.hover="",e.toolTip.style.display="none",t.style.cursor="auto")}else e.hover="",e.toolTip.style.display="none",t.style.cursor="auto";e.redraw()}}),t.addEventListener("click",function(t){e.hover&&(e.controls.getHottestServer().next(!1),e.controls.setIfNotCurrent(e.hover))}),t.addEventListener("mouseout",function(){e.hover="",e.toolTip.style.display="none",t.style.cursor="auto",e.redraw()})}},{key:"redraw",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var t=this.ctx.canvas.width,e=this.ctx.canvas.height,r=Math.floor((e-60)/this.units),i=Math.floor((t-20)/this.racks),o=0;o<this.racks;o++){for(var a=0;a<this.units;a++)this.ctx.beginPath(),this.ctx.moveTo(10+Math.floor(i)*o,30+r*a),this.ctx.lineTo(10+Math.floor(i)*o,30+r*(a+1)),this.ctx.lineTo(10+Math.floor(.1*i)+Math.floor(i)*o,30+r*(a+1)+Math.floor(.2*r)),this.ctx.lineTo(10+i*o+Math.floor(.9*i),30+r*(a+1)+Math.floor(.2*r)),this.ctx.stroke();this.ctx.lineTo(10+i*o+Math.floor(.9*i),30+Math.floor(.2*r)),this.ctx.lineTo(10+i*o+Math.floor(.9*i)-Math.floor(.1*i),30),this.ctx.lineTo(10+Math.floor(i)*o,30),this.ctx.fillStyle="rgba(198, 198, 198, 0.7)",this.ctx.fill(),this.ctx.stroke(),this.ctx.lineTo(10+Math.floor(.1*i)+Math.floor(i)*o,30+Math.floor(.2*r)),this.ctx.stroke()}for(var c=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]}),u=0;u<c.length;u++){this.hover===c[u].sid?this.ctx.fillStyle="RED":this.ctx.fillStyle="#E1E1E1",this.ctx.beginPath(),this.ctx.strokeStyle="BLACK";var h=10+Math.floor(i)*c[u].rack+Math.floor(.1*i),l=30+r*c[u].unit+Math.floor(.2*r),f=Math.floor(.8*i),d=r;this.ctx.rect(h,l,f,d),this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(h+Math.floor(.25*f),l+Math.floor(.25*d),Math.floor(.25*f),Math.floor(.5*d));var p=n.c-n.e,v=c[u].temp-n.e;if(v>p/2){var m=(v-=p/2)/(p/2),b="rgb(255,"+(255-Math.floor(255*m))+",0)";this.ctx.fillStyle=b}else{var y=v/(p/2),g="rgb("+Math.floor(255*y)+",255,0)";this.ctx.fillStyle=g}if(this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(h+Math.floor(.5*f),l+Math.floor(.25*d),Math.floor(.25*f),Math.floor(.5*d)),p=n.b-n.d,(v=c[u].cpu-n.d)>p/2){var x=(v-=p/2)/(p/2),w="rgb(255,"+(255-Math.floor(255*x))+",0)";this.ctx.fillStyle=w}else{var S=v/(p/2),E="rgb("+Math.floor(255*S)+",255,0)";this.ctx.fillStyle=E}this.ctx.fill(),this.ctx.stroke(),this.ctx.textAlign="center",this.ctx.font="bolder 12px Arial",this.ctx.fillStyle="BLACK",this.ctx.fillText("%",h+Math.floor(.6125*f),l+Math.floor(.5*d)+5),this.ctx.fillText("°C",h+Math.floor(.3875*f),l+Math.floor(.5*d)+5)}0==c.length&&(this.ctx.fillStyle="rgba(198, 198, 198, 0.9)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="BLACK",this.ctx.textAlign="center",this.ctx.font="bolder 30px Arial",this.ctx.fillText("No Data",Math.floor(this.ctx.canvas.width/2),Math.floor(this.ctx.canvas.height/2)))}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverDisplay.set(t.sid,{cpu:t.cpu,temp:t.temp}),this.serverData.set(t.mid,t),this.redraw()}},{key:"remove",value:function(t){this.serverData.delete(t),this.redraw()}},{key:"setDetails",value:function(){document.getElementById("room_details").innerHTML="Room "+this.room,document.getElementById("room_sql").innerHTML=this.getSQLString()}},{key:"getSQLString",value:function(){return"SELECT * FROM ServerData<br>WHERE Room = '"+this.room+"' AND Live = true"}},{key:"getServerData",value:function(t){for(var e=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]}),r=0;r<e.length;r++)if(e[r].sid===t)return e[r];return""}},{key:"subscribe",value:function(t){var e=this;this.subQuery=t?this.Dbinterface.doQuery():this.Dbinterface.updateQuery({room:this.room}),this.subscription=this.subQuery.subscribe(function(t){return e.handleEvent(t)},function(t){console.log("Error in Roomclient: %s",JSON.stringify(t)),e.subscription.unsubscribe(),e.serverData=new Map,e.redraw(),e.subscribe(!1)},function(){return console.log("onCompleted")})}}]),t}()},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var i=r(1);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],i=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.provider=r,this.dbinstance=i,this.initial=!0,this.serverid=n,this.limit=25,this.page=0,this.offset=0,this.drawOffset=30,this.serverData=new Map,this.temp={}}return function(t,e,r){e&&s(t.prototype,e),r&&s(t,r)}(t,[{key:"init",value:function(){var t=this;this.provider==i.c?(this.ctx=document.getElementById("srv_ba_cvs").getContext("2d"),this.left=document.getElementById("srv_ba_left"),this.right=document.getElementById("srv_ba_right"),this.latency=document.getElementById("latency_srv_ba")):this.provider==i.d&&(this.ctx=document.getElementById("srv_fb_cvs").getContext("2d"),this.left=document.getElementById("srv_fb_left"),this.right=document.getElementById("srv_fb_right"),this.latency=document.getElementById("latency_srv_fb")),this.controls.getServerId().subscribe(function(e){e&&(t.serverid=e,t.updateFilter(),t.setDetails())}),this.controls.getServerLimit().subscribe(function(e){isNaN(e)||(t.limit=e,t.page=0,t.offset=0,t.updateFilter(),t.setDetails())}),this.controls.getServerOffset().subscribe(function(e){isNaN(e)||(t.page=parseInt(e),t.offset=t.page*t.limit,t.updateFilter(),t.setDetails())}),this.left.addEventListener("click",function(){t.page++,t.controls.getServerOffset().next(t.page)}),this.right.addEventListener("click",function(){t.page--,t.controls.getServerOffset().next(t.page)}),this.setDetails(),this.redraw()}},{key:"redraw",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);var t=Array.from(this.serverData,function(t){var e=n(t,2);e[0];return e[1]}),e=this.ctx.canvas.width,r=this.ctx.canvas.height,i=Math.floor((e-2*this.drawOffset)/(this.limit-1));t.sort(function(t,e){return e.ts-t.ts});var s=Math.floor((this.ctx.canvas.height-2*this.drawOffset)/4);if(this.ctx.beginPath(),this.ctx.arc(Math.floor(1/3*e)-10,r-this.drawOffset/2,4,0,2*Math.PI),this.ctx.strokeStyle="#ff9d00",this.ctx.fillStyle="#ff9d00",this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(Math.floor(2/3*e)-10,r-this.drawOffset/2,4,0,2*Math.PI),this.ctx.strokeStyle="#0007d3",this.ctx.fillStyle="#0007d3",this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="#0007d3",this.ctx.textAlign="left",this.ctx.font="bolder 16px Arial",this.ctx.fillText("CPU",Math.floor(2/3*e),r-this.drawOffset/2+5),this.ctx.beginPath(),this.ctx.fillStyle="#ff9d00",this.ctx.fillText("Temperature",Math.floor(1/3*e),r-this.drawOffset/2+5),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset),this.ctx.lineTo(e-this.drawOffset,this.drawOffset),this.ctx.lineWidth=1,this.ctx.strokeStyle="#bababa",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+2*s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+2*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+3*s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+3*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+4*s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+4*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e-this.drawOffset,this.drawOffset),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+4*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset),this.ctx.lineTo(this.drawOffset,this.drawOffset+4*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="BLACK",this.ctx.fillText(0==this.page?"t":"t-"+(this.offset+1),e-this.drawOffset-5,this.drawOffset+4*s+15),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="BLACK",this.ctx.fillText("t-"+this.limit*(this.page+1),this.drawOffset,this.drawOffset+4*s+15),this.ctx.stroke(),this.serverData.size>0)for(var o=0;o<t.length;o++)o>0&&(this.ctx.beginPath(),this.ctx.moveTo(e-this.drawOffset-(o-1)*i,this.calcY(t[o-1].temp)),this.ctx.lineWidth=2,this.ctx.strokeStyle="#ff9d00",this.ctx.lineTo(e-this.drawOffset-o*i,this.calcY(t[o].temp)),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e-this.drawOffset-(o-1)*i,this.calcY(t[o-1].cpu)),this.ctx.lineWidth=2,this.ctx.strokeStyle="#0007d3",this.ctx.lineTo(e-this.drawOffset-o*i,this.calcY(t[o].cpu)),this.ctx.stroke()),this.ctx.beginPath(),this.ctx.arc(e-this.drawOffset-o*i,this.calcY(t[o].temp),4,0,2*Math.PI),this.ctx.strokeStyle="#ff9d00",this.ctx.fillStyle="#ff9d00",this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(e-this.drawOffset-o*i,this.calcY(t[o].cpu),4,0,2*Math.PI),this.ctx.strokeStyle="#0007d3",this.ctx.fillStyle="#0007d3",this.ctx.fill(),this.ctx.stroke();else this.ctx.beginPath(),this.ctx.fillStyle="rgba(198, 198, 198, 0.9)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="BLACK",this.ctx.textAlign="center",this.ctx.font="bolder 30px Arial",this.ctx.fillText(this.errorMsg,Math.floor(this.ctx.canvas.width/2),Math.floor(this.ctx.canvas.height/2))}},{key:"calcY",value:function(t){var e=this.ctx.canvas.height-2*this.drawOffset,r=e/100,i=Math.floor(r*t);return this.drawOffset+(e-i)}},{key:"handleEvent",value:function(t){try{switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}catch(t){console.log(t)}}},{key:"add",value:function(t){this.serverData.set(t.mid,t),this.setDetails(),this.redraw()}},{key:"remove",value:function(t){this.serverData.delete(t),this.setDetails(),this.redraw()}},{key:"setDetails",value:function(){var t=document.getElementById("server_details");if(t.innerHTML!=="Server "+this.serverid){t.innerHTML="Server "+this.serverid,t.classList.add("serverChange");var e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)}document.getElementById("server_sql").innerHTML=this.getSQLString(),this.left&&(this.serverData.size==this.limit?this.left.disabled=!1:this.left.disabled=!0),this.right&&(this.page>0?this.right.disabled=!1:this.right.disabled=!0)}},{key:"getSQLString",value:function(){var t="SELECT * FROM ServerData<br>WHERE ServerID = '"+this.serverid+"'<br>ORDER BY Timestamp DESC<br>LIMIT "+this.limit;return this.page>0&&(t=t+" OFFSET "+this.page*this.limit),t}},{key:"updateFilter",value:function(){var t=this;try{this.initial?(this.Dbinterface=new i.a(this.provider,this.dbinstance,i.f,{serverid:this.serverid,limit:this.limit,offset:this.offset}),this.errorMsg="No Data",this.Dbinterface.getLatency().subscribe(function(e){t.latency.innerHTML="&Oslash; "+Math.round(e)+" ms"}),this.subscription=this.Dbinterface.doQuery().subscribe(function(e){return t.handleEvent(e)},function(e){return console.log(t.provider+"onError: %s",JSON.stringify(e))},function(){return console.log("onCompleted")}),this.initial=!1):(this.subscription.unsubscribe(),this.serverData=new Map,this.subscription=this.Dbinterface.updateQuery({serverid:this.serverid,limit:this.limit,offset:this.offset}).subscribe(function(e){return t.handleEvent(e)},function(e){console.log("Error in Serverclient: %s",JSON.stringify(e)),t.updateFilter()},function(){return console.log("onCompleted")}),this.errorMsg="No Data")}catch(t){this.errorMsg=t.message,this.subscription.unsubscribe(),this.serverData=new Map,this.setDetails()}this.ctx&&this.redraw()}}]),t}()},function(t,e,r){var i,n,s;/*! nouislider - 12.0.0 - 9/14/2018 */n=[],void 0===(s="function"==typeof(i=function(){"use strict";var t="12.0.0";function e(t){return null!==t&&void 0!==t}function r(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(t,e,r){r>0&&(c(t,e),setTimeout(function(){u(t,e)},r))}function s(t){return Math.max(Math.min(t,100),0)}function o(t){return Array.isArray(t)?t:[t]}function a(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function c(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function u(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||""),i=e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,n=e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop;return{x:i,y:n}}function l(t,e){return 100/(e-t)}function f(t,e){return 100*e/(t[1]-t[0])}function d(t,e){for(var r=1;t>=e[r];)r+=1;return r}function p(t,e,r){if(r>=t.slice(-1)[0])return 100;var i=d(r,t),n=t[i-1],s=t[i],o=e[i-1],a=e[i];return o+function(t,e){return f(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([n,s],r)/l(o,a)}function v(t,e,r,i){if(100===i)return i;var n=d(i,t),s=t[n-1],o=t[n];return r?i-s>(o-s)/2?o:s:e[n-1]?t[n-1]+function(t,e){return Math.round(t/e)*e}(i-t[n-1],e[n-1]):i}function m(e,r,n){var s;if("number"==typeof r&&(r=[r]),!Array.isArray(r))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!i(s="min"===e?0:"max"===e?100:parseFloat(e))||!i(r[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");n.xPct.push(s),n.xVal.push(r[0]),s?n.xSteps.push(!isNaN(r[1])&&r[1]):isNaN(r[1])||(n.xSteps[0]=r[1]),n.xHighestCompleteStep.push(0)}function b(t,e,r){if(!e)return!0;r.xSteps[t]=f([r.xVal[t],r.xVal[t+1]],e)/l(r.xPct[t],r.xPct[t+1]);var i=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],n=Math.ceil(Number(i.toFixed(3))-1),s=r.xVal[t]+r.xNumSteps[t]*n;r.xHighestCompleteStep[t]=s}function y(t,e,r){var i;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var n=[];for(i in t)t.hasOwnProperty(i)&&n.push([t[i],i]);for(n.length&&"object"==typeof n[0][0]?n.sort(function(t,e){return t[0][0]-e[0][0]}):n.sort(function(t,e){return t[0]-e[0]}),i=0;i<n.length;i++)m(n[i][1],n[i][0],this);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)b(i,this.xNumSteps[i],this)}y.prototype.getMargin=function(e){var r=this.xNumSteps[0];if(r&&e/r%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&f(this.xVal,e)},y.prototype.toStepping=function(t){return t=p(this.xVal,this.xPct,t)},y.prototype.fromStepping=function(t){return function(t,e,r){if(r>=100)return t.slice(-1)[0];var i=d(r,e),n=t[i-1],s=t[i],o=e[i-1],a=e[i];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([n,s],(r-o)*l(o,a))}(this.xVal,this.xPct,t)},y.prototype.getStep=function(t){return t=v(this.xPct,this.xSteps,this.snap,t)},y.prototype.getNearbySteps=function(t){var e=d(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},y.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(a);return Math.max.apply(null,t)},y.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var g={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function x(e){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(e))return!0;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function w(e,r){if(!i(r))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=r}function S(e,r){if("object"!=typeof r||Array.isArray(r))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===r.min||void 0===r.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(r.min===r.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new y(r,e.snap,e.singleStep)}function E(e,r){if(r=o(r),!Array.isArray(r)||!r.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=r.length,e.start=r}function T(e,r){if(e.snap=r,"boolean"!=typeof r)throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function _(e,r){if(e.animate=r,"boolean"!=typeof r)throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function C(e,r){if(e.animationDuration=r,"number"!=typeof r)throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function M(e,r){var i,n=[!1];if("lower"===r?r=[!0,!1]:"upper"===r&&(r=[!1,!0]),!0===r||!1===r){for(i=1;i<e.handles;i++)n.push(r);n.push(!1)}else{if(!Array.isArray(r)||!r.length||r.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");n=r}e.connect=n}function k(e,r){switch(r){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function D(e,r){if(!i(r))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");if(0!==r&&(e.margin=e.spectrum.getMargin(r),!e.margin))throw new Error("noUiSlider ("+t+"): 'margin' option is only supported on linear sliders.")}function O(e,r){if(!i(r))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(r),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function L(e,r){if(!i(r)&&!Array.isArray(r))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(r)&&2!==r.length&&!i(r[0])&&!i(r[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==r){if(Array.isArray(r)||(r=[r,r]),e.padding=[e.spectrum.getMargin(r[0]),e.spectrum.getMargin(r[1])],!1===e.padding[0]||!1===e.padding[1])throw new Error("noUiSlider ("+t+"): 'padding' option is only supported on linear sliders.");if(e.padding[0]<0||e.padding[1]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");if(e.padding[0]+e.padding[1]>=100)throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function P(e,r){switch(r){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function I(e,r){if("string"!=typeof r)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var i=r.indexOf("tap")>=0,n=r.indexOf("drag")>=0,s=r.indexOf("fixed")>=0,o=r.indexOf("snap")>=0,a=r.indexOf("hover")>=0;if(s){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");D(e,e.start[1]-e.start[0])}e.events={tap:i||o,drag:n,fixed:s,snap:o,hover:a}}function N(e,r){if(!1!==r)if(!0===r){e.tooltips=[];for(var i=0;i<e.handles;i++)e.tooltips.push(!0)}else{if(e.tooltips=o(r),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")})}}function A(t,e){t.ariaFormat=e,x(e)}function j(t,e){t.format=e,x(e)}function B(e,r){if(e.keyboardSupport=r,"boolean"!=typeof r)throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function U(t,e){t.documentElement=e}function q(e,r){if("string"!=typeof r&&!1!==r)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=r}function V(e,r){if("object"!=typeof r)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var i in e.cssClasses={},r)r.hasOwnProperty(i)&&(e.cssClasses[i]=e.cssPrefix+r[i]);else e.cssClasses=r}function H(r){var i={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:g,format:g},n={step:{r:!1,t:w},start:{r:!0,t:E},connect:{r:!0,t:M},direction:{r:!0,t:P},snap:{r:!1,t:T},animate:{r:!1,t:_},animationDuration:{r:!1,t:C},range:{r:!0,t:S},orientation:{r:!1,t:k},margin:{r:!1,t:D},limit:{r:!1,t:O},padding:{r:!1,t:L},behaviour:{r:!0,t:I},ariaFormat:{r:!1,t:A},format:{r:!1,t:j},tooltips:{r:!1,t:N},keyboardSupport:{r:!0,t:B},documentElement:{r:!1,t:U},cssPrefix:{r:!0,t:q},cssClasses:{r:!0,t:V}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};r.format&&!r.ariaFormat&&(r.ariaFormat=r.format),Object.keys(n).forEach(function(o){if(!e(r[o])&&void 0===s[o]){if(n[o].r)throw new Error("noUiSlider ("+t+"): '"+o+"' is required.");return!0}n[o].t(i,e(r[o])?r[o]:s[o])}),i.pips=r.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,c=void 0!==o.style.transform;return i.transformRule=c?"transform":a?"msTransform":"webkitTransform",i.style=[["left","top"],["right","bottom"]][i.dir][i.ort],i}function R(e,i,a){var l,f,d,p,v,m=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},b=window.CSS&&CSS.supports&&CSS.supports("touch-action","none"),y=b&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),g=e,x=[],w=[],S=0,E=i.spectrum,T=[],_={},C=e.ownerDocument,M=i.documentElement||C.documentElement,k=C.body,D=-1,O=0,L=1,P=2,I="rtl"===C.dir||1===i.ort?0:100;function N(t,e){var r=C.createElement("div");return e&&c(r,e),t.appendChild(r),r}function A(t,e){var r=N(t,i.cssClasses.origin),n=N(r,i.cssClasses.handle);return n.setAttribute("data-handle",e),i.keyboardSupport&&n.setAttribute("tabindex","0"),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",i.ort?"vertical":"horizontal"),0===e?c(n,i.cssClasses.handleLower):e===i.handles-1&&c(n,i.cssClasses.handleUpper),r}function j(t,e){return!!e&&N(t,i.cssClasses.connect)}function B(t,e){return!!i.tooltips[e]&&N(t.firstChild,i.cssClasses.tooltip)}function U(t,e,r){var n=C.createElement("div"),s=[];s[O]=i.cssClasses.valueNormal,s[L]=i.cssClasses.valueLarge,s[P]=i.cssClasses.valueSub;var o=[];o[O]=i.cssClasses.markerNormal,o[L]=i.cssClasses.markerLarge,o[P]=i.cssClasses.markerSub;var a=[i.cssClasses.valueHorizontal,i.cssClasses.valueVertical],u=[i.cssClasses.markerHorizontal,i.cssClasses.markerVertical];function h(t,e){var r=e===i.cssClasses.value,n=r?a:u,c=r?s:o;return e+" "+n[i.ort]+" "+c[t]}return c(n,i.cssClasses.pips),c(n,0===i.ort?i.cssClasses.pipsHorizontal:i.cssClasses.pipsVertical),Object.keys(t).forEach(function(s){!function(t,s,o){if((o=e?e(s,o):o)!==D){var a=N(n,!1);a.className=h(o,i.cssClasses.marker),a.style[i.style]=t+"%",o>O&&((a=N(n,!1)).className=h(o,i.cssClasses.value),a.setAttribute("data-value",s),a.style[i.style]=t+"%",a.innerHTML=r.to(s))}}(s,t[s][0],t[s][1])}),n}function q(){v&&(function(t){t.parentElement.removeChild(t)}(v),v=null)}function V(e){q();var r=e.mode,i=e.density||1,n=e.filter||!1,s=e.values||!1,o=e.stepped||!1,a=function(e,r,i){if("range"===e||"steps"===e)return E.xVal;if("count"===e){if(r<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var n=r-1,s=100/n;for(r=[];n--;)r[n]=n*s;r.push(100),e="positions"}return"positions"===e?r.map(function(t){return E.fromStepping(i?E.getStep(t):t)}):"values"===e?i?r.map(function(t){return E.fromStepping(E.getStep(E.toStepping(t)))}):r:void 0}(r,s,o),c=function(t,e,r){function i(t,e){return(t+e).toFixed(7)/1}var n={},s=E.xVal[0],o=E.xVal[E.xVal.length-1],a=!1,c=!1,u=0;return(r=function(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}(r.slice().sort(function(t,e){return t-e})))[0]!==s&&(r.unshift(s),a=!0),r[r.length-1]!==o&&(r.push(o),c=!0),r.forEach(function(s,o){var h,l,f,d,p,v,m,b,y,g,x=s,w=r[o+1],S="steps"===e;if(S&&(h=E.xNumSteps[o]),h||(h=w-x),!1!==x&&void 0!==w)for(h=Math.max(h,1e-7),l=x;l<=w;l=i(l,h)){for(b=(p=(d=E.toStepping(l))-u)/t,g=p/(y=Math.round(b)),f=1;f<=y;f+=1)n[(v=u+f*g).toFixed(5)]=[E.fromStepping(v),0];m=r.indexOf(l)>-1?L:S?P:O,!o&&a&&(m=0),l===w&&c||(n[d.toFixed(5)]=[l,m]),u=d}}),n}(i,r,a),u=e.format||{to:Math.round};return v=g.appendChild(U(c,n,u))}function R(){var t=l.getBoundingClientRect(),e="offset"+["Width","Height"][i.ort];return 0===i.ort?t.width||l[e]:t.height||l[e]}function Y(t,e,r,n){var s=function(s){return!!(s=function(t,e,r){var i,n,s=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(a=!0),s){var c=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,c);if(u.length>1)return!1;i=u[0].pageX,n=u[0].pageY}else{var l=Array.prototype.find.call(t.changedTouches,c);if(!l)return!1;i=l.pageX,n=l.pageY}}return e=e||h(C),(o||a)&&(i=t.clientX+e.x,n=t.clientY+e.y),t.pageOffset=e,t.points=[i,n],t.cursor=o||a,t}(s,n.pageOffset,n.target||e))&&!(g.hasAttribute("disabled")&&!n.doNotReject)&&!(function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}(g,i.cssClasses.tap)&&!n.doNotReject)&&!(t===m.start&&void 0!==s.buttons&&s.buttons>1)&&(!n.hover||!s.buttons)&&(y||s.preventDefault(),s.calcPoint=s.points[i.ort],void r(s,n))},o=[];return t.split(" ").forEach(function(t){e.addEventListener(t,s,!!y&&{passive:!0}),o.push([t,s])}),o}function F(t){var e=t-function(t,e){var r=t.getBoundingClientRect(),i=t.ownerDocument,n=i.documentElement,s=h(i);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(s.x=0),e?r.top+s.y-n.clientTop:r.left+s.x-n.clientLeft}(l,i.ort),r=100*e/R();return r=s(r),i.dir?100-r:r}function Q(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&W(t,e)}function z(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return W(t,e);var r=(i.dir?-1:1)*(t.calcPoint-e.startCalcPoint),n=100*r/e.baseSize;rt(r>0,n,e.locations,e.handleNumbers)}function W(t,e){e.handle&&(u(e.handle,i.cssClasses.active),S-=1),e.listeners.forEach(function(t){M.removeEventListener(t[0],t[1])}),0===S&&(u(g,i.cssClasses.drag),nt(),t.cursor&&(k.style.cursor="",k.removeEventListener("selectstart",r))),e.handleNumbers.forEach(function(t){$("change",t),$("set",t),$("end",t)})}function X(t,e){var n;if(1===e.handleNumbers.length){var s=f[e.handleNumbers[0]];if(s.hasAttribute("disabled"))return!1;n=s.children[0],S+=1,c(n,i.cssClasses.active)}t.stopPropagation();var o=[],a=Y(m.move,M,z,{target:t.target,handle:n,listeners:o,startCalcPoint:t.calcPoint,baseSize:R(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:x.slice()}),u=Y(m.end,M,W,{target:t.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers}),h=Y("mouseout",M,Q,{target:t.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers});o.push.apply(o,a.concat(u,h)),t.cursor&&(k.style.cursor=getComputedStyle(t.target).cursor,f.length>1&&c(g,i.cssClasses.drag),k.addEventListener("selectstart",r,!1)),e.handleNumbers.forEach(function(t){$("start",t)})}function K(t){t.stopPropagation();var e=F(t.calcPoint),r=function(t){var e=100,r=!1;return f.forEach(function(i,n){if(!i.hasAttribute("disabled")){var s=Math.abs(x[n]-t);(s<e||100===s&&100===e)&&(r=n,e=s)}}),r}(e);if(!1===r)return!1;i.events.snap||n(g,i.cssClasses.tap,i.animationDuration),st(r,e,!0,!0),nt(),$("slide",r,!0),$("update",r,!0),$("change",r,!0),$("set",r,!0),i.events.snap&&X(t,{handleNumbers:[r]})}function G(t){var e=F(t.calcPoint),r=E.getStep(e),i=E.fromStepping(r);Object.keys(_).forEach(function(t){"hover"===t.split(".")[0]&&_[t].forEach(function(t){t.call(p,i)})})}function J(t,e){_[t]=_[t]||[],_[t].push(e),"update"===t.split(".")[0]&&f.forEach(function(t,e){$("update",e)})}function $(t,e,r){Object.keys(_).forEach(function(n){var s=n.split(".")[0];t===s&&_[n].forEach(function(t){t.call(p,T.map(i.format.to),e,T.slice(),r||!1,x.slice())})})}function Z(t){return t+"%"}function tt(t,e,r,n,o,a){return f.length>1&&(n&&e>0&&(r=Math.max(r,t[e-1]+i.margin)),o&&e<f.length-1&&(r=Math.min(r,t[e+1]-i.margin))),f.length>1&&i.limit&&(n&&e>0&&(r=Math.min(r,t[e-1]+i.limit)),o&&e<f.length-1&&(r=Math.max(r,t[e+1]-i.limit))),i.padding&&(0===e&&(r=Math.max(r,i.padding[0])),e===f.length-1&&(r=Math.min(r,100-i.padding[1]))),!((r=s(r=E.getStep(r)))===t[e]&&!a)&&r}function et(t,e){var r=i.ort;return(r?e:t)+", "+(r?t:e)}function rt(t,e,r,i){var n=r.slice(),s=[!t,t],o=[t,!t];i=i.slice(),t&&i.reverse(),i.length>1?i.forEach(function(t,r){var i=tt(n,t,n[t]+e,s[r],o[r],!1);!1===i?e=0:(e=i-n[t],n[t]=i)}):s=o=[!0];var a=!1;i.forEach(function(t,i){a=st(t,r[t]+e,s[i],o[i])||a}),a&&i.forEach(function(t){$("update",t),$("slide",t)})}function it(t,e){return i.dir?100-t-e:t}function nt(){w.forEach(function(t){var e=x[t]>50?-1:1,r=3+(f.length+e*t);f[t].style.zIndex=r})}function st(t,e,r,n){return!1!==(e=tt(x,t,e,r,n,!1))&&(function(t,e){x[t]=e,T[t]=E.fromStepping(e);var r="translate("+et(Z(it(e,0)-I),"0")+")";f[t].style[i.transformRule]=r,ot(t),ot(t+1)}(t,e),!0)}function ot(t){if(d[t]){var e=0,r=100;0!==t&&(e=x[t-1]),t!==d.length-1&&(r=x[t]);var n=r-e,s="translate("+et(Z(it(e,n)),"0")+")",o="scale("+et(n/100,"1")+")";d[t].style[i.transformRule]=s+" "+o}}function at(t,e){var r=o(t),s=void 0===x[0];e=void 0===e||!!e,i.animate&&!s&&n(g,i.cssClasses.tap,i.animationDuration),w.forEach(function(t){st(t,function(t,e){return null===t||!1===t||void 0===t?x[e]:("number"==typeof t&&(t=String(t)),t=i.format.from(t),!1===(t=E.toStepping(t))||isNaN(t)?x[e]:t)}(r[t],t),!0,!1)}),w.forEach(function(t){st(t,x[t],!0,!0)}),nt(),w.forEach(function(t){$("update",t),null!==r[t]&&e&&$("set",t)})}function ct(){var t=T.map(i.format.to);return 1===t.length?t[0]:t}return l=function(t){return c(t,i.cssClasses.target),0===i.dir?c(t,i.cssClasses.ltr):c(t,i.cssClasses.rtl),0===i.ort?c(t,i.cssClasses.horizontal):c(t,i.cssClasses.vertical),N(t,i.cssClasses.base)}(g),function(t,e){var r=N(e,i.cssClasses.connects);f=[],(d=[]).push(j(r,t[0]));for(var n=0;n<i.handles;n++)f.push(A(e,n)),w[n]=n,d.push(j(r,t[n+1]))}(i.connect,l),function(t){t.fixed||f.forEach(function(t,e){Y(m.start,t.children[0],X,{handleNumbers:[e]})}),t.tap&&Y(m.start,l,K,{}),t.hover&&Y(m.move,l,G,{hover:!0}),t.drag&&d.forEach(function(e,r){if(!1!==e&&0!==r&&r!==d.length-1){var n=f[r-1],s=f[r],o=[e];c(e,i.cssClasses.draggable),t.fixed&&(o.push(n.children[0]),o.push(s.children[0])),o.forEach(function(t){Y(m.start,t,X,{handles:[n,s],handleNumbers:[r-1,r]})})}})}(i.events),at(i.start),p={destroy:function(){for(var t in i.cssClasses)i.cssClasses.hasOwnProperty(t)&&u(g,i.cssClasses[t]);for(;g.firstChild;)g.removeChild(g.firstChild);delete g.noUiSlider},steps:function(){return x.map(function(t,e){var r=E.getNearbySteps(t),i=T[e],n=r.thisStep.step,s=null;!1!==n&&i+n>r.stepAfter.startValue&&(n=r.stepAfter.startValue-i),s=i>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&i-r.stepBefore.highestStep,100===t?n=null:0===t&&(s=null);var o=E.countStepDecimals();return null!==n&&!1!==n&&(n=Number(n.toFixed(o))),null!==s&&!1!==s&&(s=Number(s.toFixed(o))),[s,n]})},on:J,off:function(t){var e=t&&t.split(".")[0],r=e&&t.substring(e.length);Object.keys(_).forEach(function(t){var i=t.split(".")[0],n=t.substring(i.length);e&&e!==i||r&&r!==n||delete _[t]})},get:ct,set:at,reset:function(t){at(i.start,t)},__moveHandles:function(t,e,r){rt(t,e,x,r)},options:a,updateOptions:function(t,e){var r=ct(),n=["margin","limit","padding","range","animate","snap","step","format"];n.forEach(function(e){void 0!==t[e]&&(a[e]=t[e])});var s=H(a);n.forEach(function(e){void 0!==t[e]&&(i[e]=s[e])}),E=s.spectrum,i.margin=s.margin,i.limit=s.limit,i.padding=s.padding,i.pips&&V(i.pips),x=[],at(t.start||r,e)},target:g,removePips:q,pips:V},i.pips&&V(i.pips),i.tooltips&&function(){var t=f.map(B);J("update",function(e,r,n){if(t[r]){var s=e[r];!0!==i.tooltips[r]&&(s=i.tooltips[r].to(n[r])),t[r].innerHTML=s}})}(),J("update",function(t,e,r,n,s){w.forEach(function(t){var e=f[t],n=tt(x,t,0,!0,!0,!0),o=tt(x,t,100,!0,!0,!0),a=s[t],c=i.ariaFormat.to(r[t]);n=E.fromStepping(n).toFixed(1),o=E.fromStepping(o).toFixed(1),a=E.fromStepping(a).toFixed(1),e.children[0].setAttribute("aria-valuemin",n),e.children[0].setAttribute("aria-valuemax",o),e.children[0].setAttribute("aria-valuenow",a),e.children[0].setAttribute("aria-valuetext",c)})}),p}return{__spectrum:y,version:t,create:function(e,r){if(!e||!e.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var i=H(r),n=R(e,i,r);return e.noUiSlider=n,n}}})?i.apply(e,n):i)||(t.exports=s)},function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);t.exports=function(){return r(i),i}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},function(t,e){for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,n=r;return[n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]]].join("")}},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var i=r(1),n=r(17);function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.firebaseClient=new i.a(i.d,e.fb,i.b,{}),this.baqendClient=new i.a(i.c,e.ba,i.b,{}),this.insertRate=r,this.servers=[],this.serverCount,this.counter=0,this.initial=!0}return function(t,e,r){e&&s(t.prototype,e),r&&s(t,r)}(t,[{key:"setup",value:function(){var t={0:"freebsd",1:"ubuntu",2:"windows Server 2012",3:"windows Server 2016"},e=0,r=0;this.serverCount=40;for(var i=0;i<this.serverCount;i++){var s={};s.mid=Object(n.v4)(),s.os=t[e],s.rack=r,s.unit=i%5,i<this.serverCount/2?s.room=1:s.room=2,s.sid="r"+s.room+"r"+s.rack+"u"+s.unit,(i+1)%4==0&&(e=(e+1)%4),(i+1)%5==0&&(r=(r+1)%4);var o=Math.random();s.temp=40*o+25,s.cpu=50*o+25,s.prob=o,s.ts=Date.now(),s.live=!0,this.servers.push(s)}}},{key:"step",value:function(){this.initial&&this.setup();for(var t=0;t<this.insertRate;t++){var e=this.servers[this.counter],r={mid:Object(n.v4)(),sid:e.sid,room:e.room,rack:e.rack,unit:e.unit,os:e.os},i=100*Math.random(),s=Math.floor(i)%2;r.cpu=i<80?0==s?Math.min(e.cpu+i/100,100):Math.max(e.cpu-i/100,0):0==s?Math.min(e.cpu+i%10,100):Math.max(e.cpu-i%10,0);var o=e.prob,a=Math.floor(o)%2;r.temp=o<80?0==a?Math.min(e.temp+o/100,90):Math.max(e.temp-o/100,25):0==a?Math.min(e.temp+o%10,90):Math.max(e.temp-o%10,25),r.prob=i,r.ts=Date.now(),r.live=!0,this.servers[this.counter]=r,this.initial||(this.firebaseClient.updateData(e),this.baqendClient.updateData(e)),this.firebaseClient.saveData(r),this.baqendClient.saveData(r),this.counter==this.serverCount-1&&(this.initial=!1),this.counter=(this.counter+1)%this.serverCount}}},{key:"start",value:function(){var t=this;this.refreshIntervalId=setInterval(function(){t.step()},1e3)}},{key:"stop",value:function(){clearInterval(this.refreshIntervalId)}},{key:"reset",value:function(){this.baqendClient.deleteAll(),this.firebaseClient.deleteAll(),this.servers=[],this.counter=0,this.initial=!0}}]),t}()},function(t,e,r){"use strict";r.r(e),function(t){var e=r(1),i=r(16),n=r(24),s=r(18),o=r(19),a=r(20),c=r(3),u=(r(21),Date.now()),h=1;i.a.then(function(t){var e=new n.a(t,3);document.getElementById("step").addEventListener("click",function(){e.step()}),document.getElementById("start").addEventListener("click",function(){e.start()}),document.getElementById("stop").addEventListener("click",function(){e.stop()}),document.getElementById("reset").addEventListener("click",function(){e.reset()})}),i.a.then(function(r){console.log("ready "+(Date.now()-u));var i=r.fb,n=r.ba,l=new c.a,f=new s.a(l,e.c,n),d=new s.a(l,e.d,i),p=new o.a(l,e.c,n),v=new o.a(l,e.d,i),m=new a.a(l,e.c,n,"r2r2u0"),b=new a.a(l,e.d,i,"r2r2u0");f.init(),d.init(),p.init(),v.init(),m.init(),b.init();var y=document.getElementById("sliderTemp"),g=document.getElementById("sliderCpu"),x=document.getElementById("minTemp"),w=document.getElementById("maxTemp"),S=document.getElementById("minCpu"),E=document.getElementById("maxCpu");t.create(y,{start:[c.e,c.c],connect:!0,range:{min:c.e,max:c.c}}),y.noUiSlider.on("update",function(t,e){var r=t[e];e?(l.getMaxTemp().next(r),w.value=r):(l.getMinTemp().next(r),x.value=r)}),x.addEventListener("change",function(){l.getMinTemp().next(x.value)}),w.addEventListener("change",function(){l.getMaxTemp().next(E.value)}),t.create(g,{start:[c.d,c.b],connect:!0,range:{min:c.d,max:c.b}}),g.noUiSlider.on("update",function(t,e){var r=t[e];e?(l.getMaxCpu().next(r),E.value=r):(l.getMinCpu().next(r),S.value=r)}),S.addEventListener("change",function(){l.getMinCpu().next(S.value),g.noUiSlider.set([S.value,null])}),E.addEventListener("change",function(){l.getMaxCpu().next(E.value),g.noUiSlider.set([null,E.value])}),document.getElementById("applyRange").addEventListener("click",function(){f.updateFilter(),d.updateFilter()}),document.getElementById("hottest").addEventListener("change",function(){var t=document.getElementById("hottest").checked;l.getHottestServer().next(t)}),l.getHottestServer().subscribe(function(t){document.getElementById("hottest").checked=t});var T=document.getElementById("roomSelect");T.addEventListener("change",function(){T.value!=h&&(h=T.value,l.getRoomNumber().next(h))});var _=document.getElementById("limit");_.addEventListener("change",function(){l.getServerLimit().next(parseInt(_.value))})})}.call(this,r(21))},,function(t,e,r){var i,n,s=r(22),o=r(23),a=0,c=0;t.exports=function(t,e,r){var u=e&&r||0,h=e||[],l=(t=t||{}).node||i,f=void 0!==t.clockseq?t.clockseq:n;if(null==l||null==f){var d=s();null==l&&(l=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=n=16383&(d[6]<<8|d[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:c+1,m=p-a+(v-c)/1e4;if(m<0&&void 0===t.clockseq&&(f=f+1&16383),(m<0||p>a)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=v,n=f;var b=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;h[u++]=b>>>24&255,h[u++]=b>>>16&255,h[u++]=b>>>8&255,h[u++]=255&b;var y=p/4294967296*1e4&268435455;h[u++]=y>>>8&255,h[u++]=255&y,h[u++]=y>>>24&15|16,h[u++]=y>>>16&255,h[u++]=f>>>8|128,h[u++]=255&f;for(var g=0;g<6;++g)h[u+g]=l[g];return e||o(h)}},function(t,e,r){var i=r(22),n=r(23);t.exports=function(t,e,r){var s=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;++a)e[s+a]=o[a];return e||n(o)}},,function(t,e,r){"use strict";r.d(e,"a",function(){return o});var i=r(0),n=r(14),s=r(8),o=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return i.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(n.a)}]);