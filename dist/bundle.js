!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=26)}([function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"f",function(){return o}),i.d(e,"d",function(){return a}),i.d(e,"e",function(){return u}),i.d(e,"c",function(){return c}),i.d(e,"a",function(){return h});var r=i(31);function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=1,o=25,a=90,u=0,c=100,h=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minTemp=new r.a,this.maxTemp=new r.a,this.minCpu=new r.a,this.maxCpu=new r.a,this.hottestServer=new r.a,this.hottestServer.next(!0),this.hottestServerId=new r.a,this.roomNumber=new r.a,this.roomNumber.next(1),this.serverId=new r.a,this.serverId.subscribe(function(t){e.current=t}),this.serverLimit=new r.a,this.serverLimit.next(15),this.listLimit=new r.a,this.listLimit.next(10),this.serverOffset=new r.a,this.listOffset=new r.a}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"getListOffset",value:function(){return this.listOffset}},{key:"getServerLimit",value:function(){return this.serverLimit}},{key:"getServerOffset",value:function(){return this.serverOffset}},{key:"getServerId",value:function(){return this.serverId}},{key:"getHottestServer",value:function(){return this.hottestServer}},{key:"getRoomNumber",value:function(){return this.roomNumber}},{key:"getHottestServerId",value:function(){return this.hottestServerId}},{key:"getMinTemp",value:function(){return this.minTemp}},{key:"getMaxTemp",value:function(){return this.maxTemp}},{key:"getMinCpu",value:function(){return this.minCpu}},{key:"getMaxCpu",value:function(){return this.maxCpu}},{key:"setIfNotCurrent",value:function(t){t!==this.current&&this.serverId.next(t)}}]),t}()},function(t,e,i){"use strict";var r=i(31),n=i(2),s=i(14),o=i(4),a=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r}return n.a(e,t),e.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},e.prototype.requestAsyncId=function(e,i,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,r):e.flush(this)},e}(function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.scheduler=e,r.work=i,r.pending=!1,r}return n.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,r=void 0;try{this.work(t)}catch(t){i=!0,r=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return n.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(o.a))),u=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),c=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e}(function(t){function e(i,r){void 0===r&&(r=u.now);var n=t.call(this,i,function(){return e.delegate&&e.delegate!==n?e.delegate.now():r()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return n.a(e,t),e.prototype.schedule=function(i,r,n){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,r,n):t.prototype.schedule.call(this,i,r,n)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(u)))(a),h=i(5),l=i(3),f=new l.a(function(t){return t.complete()});function d(t){return t?function(t){return new l.a(function(e){return t.schedule(function(){return e.complete()})})}(t):f}function p(t){return t&&"function"==typeof t.schedule}var v=function(t){return function(e){for(var i=0,r=t.length;i<r&&!e.closed;i++)e.next(t[i]);e.closed||e.complete()}};function m(t,e){return e?new l.a(function(i){var r=new o.a,n=0;return r.add(e.schedule(function(){n!==t.length?(i.next(t[n++]),i.closed||r.add(this.schedule())):i.complete()})),r}):new l.a(v(t))}function b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];switch(p(i)?t.pop():i=void 0,t.length){case 0:return d(i);case 1:return i?m(t,i):function(t){var e=new l.a(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}(t[0]);default:return m(t,i)}}function y(t){var e=t.error;t.subscriber.error(e)}var g=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return b(this.value);case"E":return function(t,e){return e?new l.a(function(i){return e.schedule(y,0,{error:t,subscriber:i})}):new l.a(function(e){return e.error(t)})}(this.error);case"C":return d()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var x=function(t){function e(e,i,r){void 0===r&&(r=0);var n=t.call(this,e)||this;return n.scheduler=i,n.delay=r,n}return n.a(e,t),e.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new w(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(g.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(g.createError(t))},e.prototype._complete=function(){this.scheduleMessage(g.createComplete())},e}(h.a),w=function(){return function(t,e){this.notification=t,this.destination=e}}(),S=i(8),E=i(15),T=function(t){function e(e,i,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var n=t.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=e<1?1:e,n._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return n.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var i=this._events;i.push(e),i.length>this._bufferSize&&i.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new C(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,i=this._infiniteTimeWindow,r=i?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,s=r.length;if(this.closed)throw new S.a;if(this.isStopped||this.hasError?e=o.a.EMPTY:(this.observers.push(t),e=new E.a(this,t)),n&&t.add(t=new x(t,n)),i)for(var a=0;a<s&&!t.closed;a++)t.next(r[a]);else for(a=0;a<s&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||c).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,n=r.length,s=0;s<n&&!(t-r[s].time<i);)s++;return n>e&&(s=Math.max(s,n-e)),s>0&&r.splice(0,s),r},e}(s.a),C=function(){return function(t,e){this.time=t,this.value=e}}(),_=function(t){function e(e,i,r){var n=t.call(this)||this;return n.parent=e,n.outerValue=i,n.outerIndex=r,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(h.a),k=i(9),M=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,k.a),e}};var L=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),D=function(t){return function(e){for(var i=t[L]();;){var r=i.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof i.return&&e.add(function(){i.return&&i.return()}),e}},O=i(7),I=function(t){return function(e){var i=t[O.a]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(e)}},P=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function N(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var A=i(13),B=function(t){if(t instanceof l.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[O.a])return I(t);if(P(t))return v(t);if(N(t))return M(t);if(t&&"function"==typeof t[L])return D(t);var e=Object(A.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.a(e,t),e.prototype.notifyNext=function(t,e,i,r,n){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(h.a);function q(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new U(t,e))}}var U=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new H(t,this.project,this.thisArg))},t}(),H=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.project=i,n.count=0,n.thisArg=r||n,n}return n.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(h.a);function V(t,e){if(!e)return t instanceof l.a?t:new l.a(B(t));if(null!=t){if(function(t){return t&&"function"==typeof t[O.a]}(t))return function(t,e){return e?new l.a(function(i){var r=new o.a;return r.add(e.schedule(function(){var n=t[O.a]();r.add(n.subscribe({next:function(t){r.add(e.schedule(function(){return i.next(t)}))},error:function(t){r.add(e.schedule(function(){return i.error(t)}))},complete:function(){r.add(e.schedule(function(){return i.complete()}))}}))})),r}):new l.a(I(t))}(t,e);if(N(t))return function(t,e){return e?new l.a(function(i){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){i.next(t),r.add(e.schedule(function(){return i.complete()}))}))},function(t){r.add(e.schedule(function(){return i.error(t)}))})})),r}):new l.a(M(t))}(t,e);if(P(t))return m(t,e);if(function(t){return t&&"function"==typeof t[L]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new l.a(function(i){var r,n=new o.a;return n.add(function(){r&&"function"==typeof r.return&&r.return()}),n.add(e.schedule(function(){r=t[L](),n.add(e.schedule(function(){if(!i.closed){var t,e;try{var n=r.next();t=n.value,e=n.done}catch(t){return void i.error(t)}e?i.complete():(i.next(t),this.schedule())}}))})),n}):new l.a(D(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var R=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new F(t,this.project,this.concurrent))},t}(),F=function(t){function e(e,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var n=t.call(this,e)||this;return n.project=i,n.concurrent=r,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return n.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,i)},e.prototype._innerSub=function(t,e,i){var r=new _(this,void 0,void 0);this.add(r),function(t,e,i,r,n){if(void 0===n&&(n=new _(t,i,r)),!n.closed)B(e)(n)}(this,t,e,i,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,i,r,n){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(j);function Q(t){return t}function Y(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,i,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof i?function(n){return n.pipe(t(function(t,r){return V(e(t,r)).pipe(q(function(e,n){return i(t,e,r,n)}))},r))}:("number"==typeof i&&(r=i),function(t){return t.lift(new R(e,r))})}(Q,t)}var z=function(){function t(t,e,i){void 0===i&&(i=!1),this.accumulator=t,this.seed=e,this.hasSeed=i}return t.prototype.call=function(t,e){return e.subscribe(new W(t,this.accumulator,this.seed,this.hasSeed))},t}(),W=function(t){function e(e,i,r,n){var s=t.call(this,e)||this;return s.accumulator=i,s._seed=r,s.hasSeed=n,s.index=0,s}return n.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.accumulator(this.seed,t,i)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(h.a);function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,i){return e&&K(t.prototype,e),i&&K(t,i),t}i.d(e,"c",function(){return J}),i.d(e,"d",function(){return $}),i.d(e,"f",function(){return Z}),i.d(e,"e",function(){return tt}),i.d(e,"h",function(){return et}),i.d(e,"g",function(){return it}),i.d(e,"b",function(){return rt}),i.d(e,"i",function(){return nt}),i.d(e,"k",function(){return st}),i.d(e,"j",function(){return ot}),i.d(e,"a",function(){return at});var J=0,$=1,Z=10,tt=20,et=30,it=40,rt=50,nt=100,st=200,ot=300,at=function(){function t(e,i,r,n){switch(X(this,t),e){case $:this.dbprov=new ut(i,r,n);break;case J:this.dbprov=new ct(i,r,n)}}return G(t,[{key:"saveData",value:function(t){this.dbprov.saveData(t)}},{key:"updateData",value:function(t){this.dbprov.updateData(t)}},{key:"doQuery",value:function(){return this.dbprov.doQuery()}},{key:"updateQuery",value:function(t){return this.dbprov.updateQuery(t)}},{key:"deleteAll",value:function(){this.dbprov.deleteAll()}},{key:"getLatency",value:function(){return this.dbprov.getLatency().pipe(q(function(t){return{sum:t||0,counter:0}}),function(t,e){var i=!1;return arguments.length>=2&&(i=!0),function(r){return r.lift(new z(t,e,i))}}(function(t,e){return{sum:t.sum+e.sum,counter:t.counter+1}}),q(function(t){return t.counter?t.sum/t.counter:0}))}}]),t}(),ut=function(){function t(e,i,n){X(this,t),this.fb_inst=e,this.latency=new r.a,this.queryType=i,this.details=n,this.added=new T(40),this.removed=new T(40),this.setQuery()}return G(t,[{key:"setQuery",value:function(){switch(this.queryType){case Z:if(this.query=this.query=this.fb_inst.database().ref("serverState/").orderByChild("temp").limitToLast(this.details.limit),this.details.range||this.details.offset)throw new Error("Query not supported");break;case tt:if(this.query=this.fb_inst.database().ref("serverState/"),this.details.range)switch(this.details.range){case st:this.query=this.fb_inst.database().ref("serverState/").orderByChild("temp").startAt(this.details.minTemp).endAt(this.details.maxTemp);break;case ot:this.query=this.fb_inst.database().ref("serverState/").orderByChild("cpu").startAt(this.details.minCpu).endAt(this.details.maxCpu);break;case nt:throw new Error("Query not supported")}break;case et:this.query=this.query=this.fb_inst.database().ref("serverState/").orderByChild("serverroom").equalTo(this.details.room);break;case it:if(this.query=this.fb_inst.database().ref("serverData/"+this.details.serverid).orderByChild("ts").limitToLast(this.details.limit),this.details.offset>0)throw new Error("Query not supported")}}},{key:"doQuery",value:function(){var t=this;return this.addQuery=this.query.on("child_added",function(e){t.initialDataLoaded&&t.latency.next(Date.now()-e.val().ts),t.added.next({matchType:"add",data:e.val()})}),this.removeQuery=this.query.on("child_removed",function(e){t.removed.next({matchType:"remove",data:e.val()})}),this.removeQuery=this.query.on("child_moved",function(t){}),this.query.once("value",function(e){t.initialDataLoaded=!0}),this.subscription=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Number.POSITIVE_INFINITY,r=null,n=t[t.length-1];return p(n)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof n&&(i=t.pop()),null===r&&1===t.length&&t[0]instanceof l.a?t[0]:Y(i)(m(t,r))}(this.added,this.removed),this.subscription}},{key:"updateQuery",value:function(t){return this.added=new T(40),this.removed=new T(40),this.query.off(),this.initialDataLoaded=!1,this.details=t,this.setQuery(),this.doQuery()}},{key:"saveData",value:function(t){this.fb_inst.database().ref("serverState/"+t.mid).set({mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts}),this.fb_inst.database().ref("serverData/"+t.sid+"/"+t.mid).set({mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts})}},{key:"updateData",value:function(t){this.fb_inst.database().ref("serverState/"+t.mid).remove()}},{key:"deleteAll",value:function(){this.fb_inst.database().ref("/serverState/").remove(),this.fb_inst.database().ref("/serverData/").remove()}},{key:"getLatency",value:function(){return this.latency}}]),t}(),ct=function(){function t(e,i,n){X(this,t),this.ba_inst=e,this.latency=new r.a,this.queryType=i,this.details=n,this.setQuery()}return G(t,[{key:"setQuery",value:function(){switch(this.queryType){case Z:this.query=this.ba_inst.ServerState.find(),this.details.range&&(this.query=this.query.between("cpu",Math.floor(this.details.minCpu),Math.floor(this.details.maxCpu))),this.query=this.query.descending("temp"),this.details.offset>0&&(this.query=this.query.offset(this.details.offset)),this.query=this.query.limit(this.details.limit);break;case tt:if(this.details.range)switch(this.details.range){case st:this.query=this.ba_inst.ServerState.find().between("temp",this.details.minTemp,this.details.maxTemp);break;case ot:this.query=this.ba_inst.ServerState.find().between("cpu",this.details.minCpu,this.details.maxCpu);break;case nt:this.query=this.ba_inst.ServerState.find().between("cpu",this.details.minCpu,this.details.maxCpu).between("temp",this.details.minTemp,this.details.maxTemp)}else this.query=this.ba_inst.ServerState.find();break;case et:this.query=this.ba_inst.ServerState.find().equal("serverroom",this.details.room);break;case it:this.query=this.ba_inst.ServerData.find().equal("sid",this.details.serverid).descending("ts"),this.details.offset>0&&(this.query=this.query.offset(this.details.offset)),this.query=this.query.limit(this.details.limit)}}},{key:"doQuery",value:function(){var t=this;return this.subscription=V(this.query.eventStream()).pipe(q(function(e){if("add"===e.matchType){e.initial||t.latency.next(Date.now()-e.data.ts);var i={matchType:"add",data:e.data};return i.data.mid=i.data.id,i}if("remove"===e.matchType){var r={matchType:"remove",data:e.data};return r.data.mid=r.data.id,r}if("change"===e.matchType){var n={matchType:"change",data:e.data};return n.data.mid=n.data.id,n}})),this.subscription}},{key:"updateQuery",value:function(t){return this.details=t,this.setQuery(),this.doQuery()}},{key:"saveData",value:function(t){var e={id:t.mid,mid:t.mid,sid:t.sid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts,live:t.live},i={id:t.sid,sid:t.sid,mid:t.mid,serverroom:t.room,rack:t.rack,unit:t.unit,os:t.os,temp:t.temp,cpu:t.cpu,ts:t.ts,live:t.live},r=new this.ba_inst.ServerData(e),n=new this.ba_inst.ServerState(i);r.save(),this.ba_inst.ServerState.load(t.sid).then(function(e){e?(e.mid=t.mid,e.temp=t.temp,e.cpu=t.cpu,e.ts=t.ts,e.update()):n.save()})}},{key:"updateData",value:function(t){this.ba_inst.ServerState.load(t.mid).then(function(t){t.delete()})}},{key:"deleteAll",value:function(){var t=this;this.ba_inst.ServerState.find().resultList(function(t){t.forEach(function(t){t.delete()})}),this.ba_inst.ServerData.find().count(function(e){e>0&&t.ba_inst.ServerData.find().resultList(function(e){e.forEach(function(t){t.delete()}),t.deleteAll()})})}},{key:"getLatency",value:function(){return this.latency}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}},function(t,e,i){"use strict";var r=i(5),n=i(10),s=i(11);var o=i(7);function a(){}function u(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:a}var c=i(6);i.d(e,"a",function(){return h});var h=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var o=this.operator,a=function(t,e,i){if(t){if(t instanceof r.a)return t;if(t[n.a])return t[n.a]()}return t||e||i?new r.a(t,e,i):new r.a(s.a)}(t,e,i);if(o?o.call(a,this.source):a._addParentTeardownLogic(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=l(e))(function(e,r){var n;n=i.subscribe(function(e){try{t(e)}catch(t){r(t),n&&n.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:u(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=l(t))(function(t,i){var r;e.subscribe(function(t){return r=t},function(t){return i(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function l(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e,i){"use strict";var r,n=Array.isArray||function(t){return t&&"number"==typeof t.length},s=i(13),o=i(12),a={e:{}};function u(){try{return r.apply(this,arguments)}catch(t){return a.e=t,a}}function c(t){return r=t,u}function h(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var l=h;i.d(e,"a",function(){return f});var f=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,r=this._parents,u=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,p=r?r.length:0;i;)i.remove(this),i=++f<p&&r[f]||null;if(Object(o.a)(u))c(u).call(this)===a&&(e=!0,t=t||(a.e instanceof l?d(a.e.errors):[a.e]));if(n(h))for(f=-1,p=h.length;++f<p;){var v=h[f];if(Object(s.a)(v))if(c(v.unsubscribe).call(v)===a){e=!0,t=t||[];var m=a.e;m instanceof l?t=t.concat(d(m.errors)):t.push(m)}}if(e)throw new l(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var r=i;(i=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function d(t){return t.reduce(function(t,e){return t.concat(e instanceof l?e.errors:e)},[])}},function(t,e,i){"use strict";i.d(e,"a",function(){return h});var r=i(2),n=i(12),s=i(11),o=i(4),a=i(10),u=i(6),c=i(9),h=function(t){function e(e,i,r){var n=t.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,n._parentSubscription=null,arguments.length){case 0:n.destination=s.a;break;case 1:if(!e){n.destination=s.a;break}if("object"==typeof e){if(f(e)){var o=e[a.a]();n.syncErrorThrowable=o.syncErrorThrowable,n.destination=o,o._addParentTeardownLogic(n)}else n.syncErrorThrowable=!0,n.destination=new l(n,e);break}default:n.syncErrorThrowable=!0,n.destination=new l(n,e,i,r)}return n}return r.a(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,i,r){var n=new e(t,i,r);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},e.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(o.a),l=function(t){function e(e,i,r,o){var a,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return Object(n.a)(i)?a=i:i&&(a=i.next,r=i.error,o=i.complete,i!==s.a&&(c=Object.create(i),Object(n.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=r,u._complete=o,u}return r.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;Object(c.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw t;Object(c.a)(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(c.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);function f(t){return t instanceof h||"_addParentTeardownLogic"in t&&t[a.a]}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=!1,n={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,i){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}i.d(e,"a",function(){return n}),r.prototype=Object.create(Error.prototype);var n=r},function(t,e,i){"use strict";function r(t){setTimeout(function(){throw t})}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(6),n=i(9),s={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(n.a)(t)},complete:function(){}}},function(t,e,i){"use strict";function r(t){return"function"==typeof t}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";function r(t){return null!=t&&"object"==typeof t}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var r=i(2),n=i(3),s=i(5),o=i(4),a=i(8),u=i(15),c=i(10),h=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return r.a(e,t),e}(s.a),l=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(e,t),e.prototype[c.a]=function(){return new h(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,i=e.length,r=e.slice(),n=0;n<i;n++)r[n].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,r=e.slice(),n=0;n<i;n++)r[n].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),r=0;r<e;r++)i[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new u.a(this,t))},e.prototype.asObservable=function(){var t=new n.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(n.a),f=function(t){function e(e,i){var r=t.call(this)||this;return r.destination=e,r.source=i,r}return r.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.a.EMPTY},e}(l)},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i(2),n=function(t){function e(e,i){var r=t.call(this)||this;return r.subject=e,r.subscriber=i,r.closed=!1,r}return r.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(i(4).a)},function(t,e,i){var r=i(28),n=i(29),s=n;s.v1=r,s.v4=n,t.exports=s},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(1),n=i(0);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.provider=i,this.controls=e,this.dbinstance=s,this.errorMsg="No Data",this.minCpu=n.e,this.maxCpu=n.c,this.page=0,this.limit=10,this.serverData=new Map,this.Dbinterface=new r.a(i,s,r.f,{limit:this.limit}),this.initial=!0,this.hotMode=!0}return function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(t,[{key:"init",value:function(){var t=this;this.provider==r.c?(this.list=document.getElementById("ovl_ba"),this.left=document.getElementById("ovl_ba_left"),this.right=document.getElementById("ovl_ba_right"),this.overlay=document.getElementById("overlay_ba"),this.latency=document.getElementById("latency_ovl_ba")):this.provider==r.d&&(this.list=document.getElementById("ovl_fb"),this.left=document.getElementById("ovl_fb_left"),this.right=document.getElementById("ovl_fb_right"),this.overlay=document.getElementById("overlay_fb"),this.latency=document.getElementById("latency_ovl_fb")),this.Dbinterface.getLatency().subscribe(function(e){t.latency.innerHTML="&Oslash; "+Math.round(e)+" ms"}),this.setSubscription(),this.controls.getListOffset().subscribe(function(e){isNaN(e)||(t.page=parseInt(e),t.offset=t.page*t.limit,t.updateFilter(t.minCpu,t.maxCpu),t.setDetails())}),this.controls.getHottestServer().subscribe(function(e){t.hotMode=e}),this.left.addEventListener("click",function(){t.page--,t.controls.getListOffset().next(t.page)}),this.right.addEventListener("click",function(){t.page++,t.controls.getListOffset().next(t.page)}),this.reloadList(),this.setDetails()}},{key:"subscribe",value:function(){var t=this;this.errorMsg="No Data",this.serverData=new Map,this.reloadList(),this.setDetails(),this.subscription=this.subquery.subscribe(function(e){return t.handleEvent(e)},function(e){console.log("Error in OverviewListclient: %s",JSON.stringify(e)),t.subscription.unsubscribe(),t.subscribe()},function(){return console.log("onCompleted")})}},{key:"reloadList",value:function(){for(var t=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.serverData.size>0?function(){t.overlay.style.display="none",t.serverData.size==t.limit?t.right.disabled=!1:t.right.disabled=!0,t.page>0?t.left.disabled=!1:t.left.disabled=!0;var e=Array.from(t.serverData,function(t){var e=s(t,2);e[0];return e[1]});e.sort(function(t,e){return e.temp-t.temp});for(var i=function(i){var r=document.createElement("li");i%2==0&&r.classList.add("even"),r.style.height=Math.round(272/e.length)+"px",r.style.lineHeight=Math.round(272/e.length)+"px",r.addEventListener("click",function(){t.controls.getServerId().next(e[i].sid)});var n=document.createElement("span");n.appendChild(document.createTextNode(t.page*t.limit+(i+1))),n.classList.add("index");var s=document.createElement("span");s.appendChild(document.createTextNode(e[i].sid)),s.classList.add("data");var o=document.createElement("span");o.appendChild(document.createTextNode(e[i].temp.toFixed(2)+"°C")),o.classList.add("data");var a=document.createElement("span");a.appendChild(document.createTextNode(e[i].cpu.toFixed(2)+"%")),a.classList.add("data"),r.appendChild(n),r.appendChild(s),r.appendChild(o),r.appendChild(a),t.list.appendChild(r)},r=0;r<e.length;r++)i(r)}():(this.overlay.innerHTML=this.errorMsg,this.overlay.style.display="block")}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.sid);break;case"change":this.add(t.data);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverData.set(t.sid,t),this.reloadList()}},{key:"remove",value:function(t){this.serverData.delete(t),this.reloadList()}},{key:"updateFilter",value:function(t,e){this.minCpu=t,this.maxCpu=e,this.setSubscription()}},{key:"setSubscription",value:function(){try{this.minCpu==n.e&&this.maxCpu==n.c?(this.initial?(this.subquery=this.Dbinterface.doQuery(),this.initial=!1):(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({limit:this.limit,offset:this.offset})),this.subscribe()):(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:r.j,minCpu:this.minCpu,maxCpu:this.maxCpu,limit:this.limit,offset:this.offset}),this.subscribe())}catch(t){this.errorMsg=t.message,console.log(t),this.subscription.unsubscribe(),this.serverData=new Map,this.reloadList(),this.setDetails()}}},{key:"setDetails",value:function(){document.getElementById("overviewList_sql").innerHTML=this.getSQLString()}},{key:"getSQLString",value:function(){var t="SELECT * FROM ServerState<br>";return this.minCpu!=n.e&&this.maxCpu!=n.c?t=t+"WHERE CPU > "+this.minCpu+"<br>  AND CPU < "+this.maxCpu+"<br>":this.minCpu==n.e&&this.maxCpu!=n.c?t=t+"WHERE CPU < "+this.maxCpu+"<br>":this.minCpu!=n.e&&this.maxCpu==n.c&&(t=t+"WHERE CPU > "+this.minCpu+"<br>"),t=t+"ORDER BY TEMP DESC<br>LIMIT "+this.limit,this.page&&(t=t+" OFFSET "+this.page*this.limit),t}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(1),n=i(0);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.provider=i,this.controls=e,this.dbinstance=s,this.serverDisplay=new Map,this.errorMsg="No Data",this.hover="",this.offset=40,this.scaleX=6,this.scaleY=6,this.minTemp=n.f,this.minTempLine="",this.maxTemp=n.d,this.maxTempLine="",this.minCpu=n.e,this.minCpuLine="",this.maxCpu=n.c,this.maxCpuLine="",this.serverData=new Map,this.Dbinterface=new r.a(i,s,r.e,{}),this.initial=!0,this.hotMode=!0}return function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(t,[{key:"init",value:function(){var t=this;this.provider==r.c?(this.ctx=document.getElementById("ov_ba_cvs").getContext("2d"),this.latency=document.getElementById("latency_ov_ba")):this.provider==r.d&&(this.ctx=document.getElementById("ov_fb_cvs").getContext("2d"),this.latency=document.getElementById("latency_ov_fb")),this.cvs=this.ctx.canvas,this.toolTip=document.getElementById("ToolTip"),this.Dbinterface.getLatency().subscribe(function(e){t.latency.innerHTML="&Oslash; "+Math.round(e)+" ms"}),this.setSubscription(),this.controls.getMinTemp().subscribe(function(e){var i=Math.floor(e);i!=t.minTemp?t.minTempLine=i:t.minTempLine="",t.redraw()}),this.controls.getMaxTemp().subscribe(function(e){var i=Math.floor(e);i!=t.maxTemp?t.maxTempLine=i:t.maxTempLine="",t.redraw()}),this.controls.getMinCpu().subscribe(function(e){var i=Math.floor(e);i!=t.minCpu?t.minCpuLine=i:t.minCpuLine="",t.redraw()}),this.controls.getMaxCpu().subscribe(function(e){var i=Math.floor(e);i!=t.maxCpu?t.maxCpuLine=i:t.maxCpuLine="",t.redraw()}),this.controls.getHottestServer().subscribe(function(e){t.hotMode=e}),this.cvs.addEventListener("mousemove",function(e){if(t.serverData.size>0){var i=t.cvs.getBoundingClientRect(),r=e.clientX-i.left,n=e.clientY-i.top,o=Array.from(t.serverDisplay,function(t){var e=s(t,2);e[0];return e[1]});o.sort(function(t,e){return t.cpu-e.cpu});for(var a="",u=0;u<o.length;u++){var c=t.getDisplayPositionX(o[u].cpu),h=t.getDisplayPositionY(o[u].temp),l=10;t.hover===o[u].sid&&(l=12),r>c-l&&r<c+l&&n>h-l&&n<h+l&&(a=o[u].sid)}if(t.hover=a,t.hover){t.cvs.style.cursor="pointer";var f=t.serverDisplay.get(t.hover);t.toolTip.style.top=e.pageY-10+"px",t.toolTip.style.left=e.pageX+20+"px",t.toolTip.innerHTML=t.hover+"<br>Temp: "+Math.floor(f.temp)+"°C<br>CPU: "+Math.floor(f.cpu)+"%",t.toolTip.style.display="block"}else t.cvs.style.cursor="default",t.toolTip.style.display="none";t.redraw()}}),this.cvs.addEventListener("click",function(e){t.hover&&(t.controls.getHottestServer().next(!1),t.controls.setIfNotCurrent(t.hover))}),this.cvs.addEventListener("mouseout",function(){t.hover="",t.toolTip.style.display="none",t.cvs.style.cursor="auto",t.redraw()}),this.redraw(),this.setDetails()}},{key:"subscribe",value:function(){var t=this;this.errorMsg="No Data",this.serverDisplay=new Map,this.serverData=new Map,this.minTempLine="",this.maxTempLine="",this.minCpuLine="",this.maxCpuLine="",this.redraw(),this.setDetails(),this.subscription=this.subquery.subscribe(function(e){return t.handleEvent(e)},function(e){console.log("Error in Overviewclient: %s",JSON.stringify(e)),t.subscription.unsubscribe(),t.subscribe()},function(){return console.log("onCompleted")})}},{key:"getDisplayPositionX",value:function(t){var e=this.maxCpu-this.minCpu,i=(t-this.minCpu)/e,r=this.ctx.canvas.width-2*this.offset;return this.offset+Math.floor(i*r)}},{key:"getDisplayPositionY",value:function(t){var e=this.maxTemp-this.minTemp,i=(t-this.minTemp)/e,r=this.ctx.canvas.height-2*this.offset;return this.ctx.canvas.height-(this.offset+Math.floor(i*r))}},{key:"redraw",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.beginPath();var t=this.offset;if(this.ctx.textAlign="center",this.ctx.fillStyle="BLACK",this.ctx.font="bolder 16px Arial",this.ctx.save(),this.ctx.rotate(-Math.PI/2),this.ctx.textAlign="center",this.ctx.fillText("Temperature",-1*Math.floor(this.ctx.canvas.height/2),t-15),this.ctx.restore(),this.ctx.fillText("CPU",Math.floor(this.ctx.canvas.width/2),this.ctx.canvas.height-t+30),this.ctx.moveTo(t,this.ctx.canvas.height-t+10),this.ctx.fillText(this.minCpu+"%",t,this.ctx.canvas.height-t+30),this.ctx.fillText(this.maxCpu+"%",this.ctx.canvas.width-t,this.ctx.canvas.height-t+30),this.ctx.fillText(this.minTemp+"°",t/2,this.ctx.canvas.height-t+3),this.ctx.fillText(this.maxTemp+"°",t/2,t+3),this.ctx.lineWidth=3,this.ctx.lineTo(t,t),this.ctx.lineTo(t-10,t),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t-10,this.ctx.canvas.height-t),this.ctx.lineWidth=3,this.ctx.lineTo(this.ctx.canvas.width-t,this.ctx.canvas.height-t),this.ctx.lineTo(this.ctx.canvas.width-t,this.ctx.canvas.height-t+10),this.ctx.stroke(),this.serverData.size>0){""!=this.minTempLine&&this.minTempLine>this.minTemp&&(this.ctx.beginPath(),this.ctx.moveTo(0,this.getDisplayPositionY(this.minTempLine)),this.ctx.lineTo(this.ctx.canvas.width,this.getDisplayPositionY(this.minTempLine)),this.ctx.stroke()),""!=this.maxTempLine&&this.maxTempLine<this.maxTemp&&(this.ctx.beginPath(),this.ctx.moveTo(0,this.getDisplayPositionY(this.maxTempLine)),this.ctx.lineTo(this.ctx.canvas.width,this.getDisplayPositionY(this.maxTempLine)),this.ctx.stroke()),""!=this.minCpuLine&&this.minCpuLine>this.minCpu&&(this.ctx.beginPath(),this.ctx.moveTo(this.getDisplayPositionX(this.minCpuLine),0),this.ctx.lineTo(this.getDisplayPositionX(this.minCpuLine),this.ctx.canvas.height),this.ctx.stroke()),""!=this.maxCpuLine&&this.maxCpuLine<this.maxCpu&&(this.ctx.beginPath(),this.ctx.moveTo(this.getDisplayPositionX(this.maxCpuLine),0),this.ctx.lineTo(this.getDisplayPositionX(this.maxCpuLine),this.ctx.canvas.height),this.ctx.stroke());var e=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]});e.sort(function(t,e){return t.cpu-e.cpu});for(var i=0;i<e.length;i++){this.ctx.beginPath();var r=10;this.ctx.fillStyle="#ff9d00",e[i].sid===this.hover&&(r=12,this.ctx.fillStyle="RED"),this.ctx.arc(this.getDisplayPositionX(e[i].cpu),this.getDisplayPositionY(e[i].temp),r,0,2*Math.PI),this.ctx.strokeStyle="BLACK",this.ctx.lineWidth=2,this.ctx.fill(),this.ctx.stroke()}}else this.ctx.beginPath(),this.ctx.fillStyle="rgba(198, 198, 198, 0.9)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="BLACK",this.ctx.textAlign="center",this.ctx.font="bolder 30px Arial",this.ctx.fillText(this.errorMsg,Math.floor(this.ctx.canvas.width/2),Math.floor(this.ctx.canvas.height/2))}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.sid);break;case"change":this.add(t.data);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverDisplay.set(t.sid,t),this.serverData.set(t.sid,t),this.redraw(),this.calcHottest()}},{key:"remove",value:function(t){this.serverData.delete(t),this.redraw()}},{key:"calcHottest",value:function(){for(var t=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]}),e=0,i="",r=0;r<t.length;r++)t[r].temp>e&&(e=t[r].temp,i=t[r].sid);this.hotMode&&this.controls.setIfNotCurrent(i)}},{key:"updateFilter",value:function(){this.tempChanged=""!==this.minTempLine||""!==this.maxTempLine,this.cpuChanged=""!==this.minCpuLine||""!==this.maxCpuLine,this.minTemp=""!==this.minTempLine?this.minTempLine:this.minTemp,this.maxTemp=""!==this.maxTempLine?this.maxTempLine:this.maxTemp,this.minCpu=""!==this.minCpuLine?this.minCpuLine:this.minCpu,this.maxCpu=""!==this.maxCpuLine?this.maxCpuLine:this.maxCpu,this.setSubscription()}},{key:"setSubscription",value:function(){try{var t=this.minTemp==n.f&&this.maxTemp==n.d,e=this.minCpu==n.e&&this.maxCpu==n.c;this.tempChanged||this.cpuChanged||this.initial?t&&e?(this.initial?(this.subquery=this.Dbinterface.doQuery(),this.initial=!1):(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({})),this.subscribe()):t&&!e?(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:r.j,minCpu:this.minCpu,maxCpu:this.maxCpu}),this.subscribe()):!t&&e?(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:r.k,minTemp:this.minTemp,maxTemp:this.maxTemp}),this.subscribe()):(this.subscription.unsubscribe(),this.subquery=this.Dbinterface.updateQuery({range:r.i,minTemp:this.minTemp,maxTemp:this.maxTemp,minCpu:this.minCpu,maxCpu:this.maxCpu}),this.subscribe()):console.log("Range not changed.")}catch(t){this.errorMsg=t.message,console.log(t),this.subscription.unsubscribe(),this.serverData=new Map,this.serverDisplay=new Map,this.redraw(),this.setDetails()}}},{key:"setDetails",value:function(){document.getElementById("overview_sql").innerHTML=this.getSQLString()}},{key:"getSQLString",value:function(){var t="SELECT * FROM ServerState<br>";return this.minTemp!=n.f&&(t=t+"  AND Temperature > "+this.minTemp+"<br>"),this.maxTemp!=n.d&&(t=t+"  AND Temperature < "+this.maxTemp+"<br>"),this.minCpu!=n.e&&(t=t+"  AND CPU > "+this.minCpu+"<br>"),this.maxCpu!=n.c&&(t=t+"  AND CPU < "+this.maxCpu+"<br>"),t}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var r=i(1),n=i(0);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.provider=i,this.dbinstance=r,this.racks=4,this.units=5,this.hover="",this.serverData=new Map,this.serverDisplay=new Map,this.initial=!0,this.room=""}return function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(t,[{key:"init",value:function(){var t,e=this;this.provider==r.c?(t=document.getElementById("rm_ba_cvs"),this.latency=document.getElementById("latency_rm_ba")):this.provider==r.d&&(t=document.getElementById("rm_fb_cvs"),this.latency=document.getElementById("latency_rm_fb")),this.controls.getRoomNumber().subscribe(function(t){e.room=parseInt(t),e.setDetails(),e.initial?(e.Dbinterface=new r.a(e.provider,e.dbinstance,r.h,{room:e.room}),e.Dbinterface.getLatency().subscribe(function(t){e.latency.innerHTML="&Oslash; "+Math.round(t)+" ms"}),e.subscribe(e.initial),e.initial=!1):(e.subscription.unsubscribe(),e.serverData=new Map,e.subscribe(!1))}),this.ctx=t.getContext("2d"),this.toolTip=document.getElementById("ToolTip"),this.redraw(),t.addEventListener("mousemove",function(i){if(e.serverData.size>0){var r=t.getBoundingClientRect(),n=e.ctx.canvas.width,s=e.ctx.canvas.height,o=Math.floor((s-60)/e.units),a=Math.floor((n-20)/e.racks),u=i.clientX-r.left,c=i.clientY-r.top,h=30+Math.floor(.2*o),l=30+Math.floor(.2*o)+5*o;if(c>h&&c<l&&(u>10+0*Math.floor(a)+Math.floor(.1*a)&&u<10+0*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+1*Math.floor(a)+Math.floor(.1*a)&&u<10+1*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+2*Math.floor(a)+Math.floor(.1*a)&&u<10+2*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+3*Math.floor(a)+Math.floor(.1*a)&&u<10+3*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a)||u>10+4*Math.floor(a)+Math.floor(.1*a)&&u<10+4*Math.floor(a)+Math.floor(.1*a)+Math.floor(.8*a))){var f=Math.floor((u-10)/a),d=Math.floor((c-h)/o),p="r"+e.room+"r"+f+"u"+d,v=e.getServerData(p);v?(e.hover=p,t.style.cursor="pointer",e.toolTip.style.top=i.pageY-10+"px",e.toolTip.style.left=i.pageX+20+"px",e.toolTip.innerHTML=e.hover+"<br>Temp: "+Math.floor(v.temp)+"°C<br>CPU: "+Math.floor(v.cpu)+"%",e.toolTip.style.display="block"):(e.hover="",e.toolTip.style.display="none",t.style.cursor="auto")}else e.hover="",e.toolTip.style.display="none",t.style.cursor="auto";e.redraw()}}),t.addEventListener("click",function(t){e.hover&&(e.controls.getHottestServer().next(!1),e.controls.setIfNotCurrent(e.hover))}),t.addEventListener("mouseout",function(){e.hover="",e.toolTip.style.display="none",t.style.cursor="auto",e.redraw()})}},{key:"redraw",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);for(var t=this.ctx.canvas.width,e=this.ctx.canvas.height,i=Math.floor((e-60)/this.units),r=Math.floor((t-20)/this.racks),o=0;o<this.racks;o++){for(var a=0;a<this.units;a++)this.ctx.beginPath(),this.ctx.moveTo(10+Math.floor(r)*o,30+i*a),this.ctx.lineTo(10+Math.floor(r)*o,30+i*(a+1)),this.ctx.lineTo(10+Math.floor(.1*r)+Math.floor(r)*o,30+i*(a+1)+Math.floor(.2*i)),this.ctx.lineTo(10+r*o+Math.floor(.9*r),30+i*(a+1)+Math.floor(.2*i)),this.ctx.stroke();this.ctx.lineTo(10+r*o+Math.floor(.9*r),30+Math.floor(.2*i)),this.ctx.lineTo(10+r*o+Math.floor(.9*r)-Math.floor(.1*r),30),this.ctx.lineTo(10+Math.floor(r)*o,30),this.ctx.fillStyle="rgba(198, 198, 198, 0.7)",this.ctx.fill(),this.ctx.stroke(),this.ctx.lineTo(10+Math.floor(.1*r)+Math.floor(r)*o,30+Math.floor(.2*i)),this.ctx.stroke()}for(var u=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]}),c=0;c<u.length;c++){this.hover===u[c].sid?this.ctx.fillStyle="RED":this.ctx.fillStyle="#E1E1E1",this.ctx.beginPath(),this.ctx.strokeStyle="BLACK";var h=10+Math.floor(r)*u[c].rack+Math.floor(.1*r),l=30+i*u[c].unit+Math.floor(.2*i),f=Math.floor(.8*r),d=i;this.ctx.rect(h,l,f,d),this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(h+Math.floor(.25*f),l+Math.floor(.25*d),Math.floor(.25*f),Math.floor(.5*d));var p=n.d-n.f,v=u[c].temp-n.f;if(v>p/2){var m=(v-=p/2)/(p/2),b="rgb(255,"+(255-Math.floor(255*m))+",0)";this.ctx.fillStyle=b}else{var y=v/(p/2),g="rgb("+Math.floor(255*y)+",255,0)";this.ctx.fillStyle=g}if(this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(h+Math.floor(.5*f),l+Math.floor(.25*d),Math.floor(.25*f),Math.floor(.5*d)),p=n.c-n.e,(v=u[c].cpu-n.e)>p/2){var x=(v-=p/2)/(p/2),w="rgb(255,"+(255-Math.floor(255*x))+",0)";this.ctx.fillStyle=w}else{var S=v/(p/2),E="rgb("+Math.floor(255*S)+",255,0)";this.ctx.fillStyle=E}this.ctx.fill(),this.ctx.stroke(),this.ctx.textAlign="center",this.ctx.font="bolder 12px Arial",this.ctx.fillStyle="BLACK",this.ctx.fillText("%",h+Math.floor(.6125*f),l+Math.floor(.5*d)+5),this.ctx.fillText("°C",h+Math.floor(.3875*f),l+Math.floor(.5*d)+5)}0==u.length&&(this.ctx.fillStyle="rgba(198, 198, 198, 0.9)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="BLACK",this.ctx.textAlign="center",this.ctx.font="bolder 30px Arial",this.ctx.fillText("No Data",Math.floor(this.ctx.canvas.width/2),Math.floor(this.ctx.canvas.height/2)))}},{key:"handleEvent",value:function(t){switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.sid);break;case"change":this.add(t.data);break;default:console.log("Wrong Eventtype")}}},{key:"add",value:function(t){this.serverDisplay.set(t.sid,{cpu:t.cpu,temp:t.temp}),this.serverData.set(t.sid,t),this.redraw()}},{key:"remove",value:function(t){this.serverData.delete(t),this.redraw()}},{key:"setDetails",value:function(){document.getElementById("room_details").innerHTML="Room "+this.room,document.getElementById("room_sql").innerHTML=this.getSQLString()}},{key:"getSQLString",value:function(){return"SELECT * FROM ServerState<br>WHERE Room = '"+this.room+"' "}},{key:"getServerData",value:function(t){for(var e=Array.from(this.serverData,function(t){var e=s(t,2);e[0];return e[1]}),i=0;i<e.length;i++)if(e[i].sid===t)return e[i];return""}},{key:"subscribe",value:function(t){var e=this;this.subQuery=t?this.Dbinterface.doQuery():this.Dbinterface.updateQuery({room:this.room}),this.subscription=this.subQuery.subscribe(function(t){return e.handleEvent(t)},function(t){console.log("Error in Roomclient"+(e.provider===r.c?" Baqend ":" Firebase ")+"%s",JSON.stringify(t)),e.subscription.unsubscribe(),e.serverData=new Map,e.redraw(),e.subscribe(!1)},function(){return console.log("onCompleted")})}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var r=i(1);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controls=e,this.provider=i,this.dbinstance=r,this.initial=!0,this.serverid=n,this.limit=25,this.page=0,this.offset=0,this.drawOffset=30,this.serverData=new Map,this.temp={}}return function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(t,[{key:"init",value:function(){var t=this;this.provider==r.c?(this.ctx=document.getElementById("srv_ba_cvs").getContext("2d"),this.left=document.getElementById("srv_ba_left"),this.right=document.getElementById("srv_ba_right"),this.latency=document.getElementById("latency_srv_ba")):this.provider==r.d&&(this.ctx=document.getElementById("srv_fb_cvs").getContext("2d"),this.left=document.getElementById("srv_fb_left"),this.right=document.getElementById("srv_fb_right"),this.latency=document.getElementById("latency_srv_fb")),this.controls.getServerId().subscribe(function(e){e&&(t.serverid=e,t.updateFilter(),t.setDetails())}),this.controls.getServerLimit().subscribe(function(e){isNaN(e)||(t.limit=e,t.page=0,t.offset=0,t.updateFilter(),t.setDetails())}),this.controls.getServerOffset().subscribe(function(e){isNaN(e)||(t.page=parseInt(e),t.offset=t.page*t.limit,t.updateFilter(),t.setDetails())}),this.left.addEventListener("click",function(){t.page++,t.controls.getServerOffset().next(t.page)}),this.right.addEventListener("click",function(){t.page--,t.controls.getServerOffset().next(t.page)}),this.setDetails(),this.redraw()}},{key:"redraw",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);var t=Array.from(this.serverData,function(t){var e=n(t,2);e[0];return e[1]}),e=this.ctx.canvas.width,i=this.ctx.canvas.height,r=Math.floor((e-2*this.drawOffset)/(this.limit-1));t.sort(function(t,e){return e.ts-t.ts});var s=Math.floor((this.ctx.canvas.height-2*this.drawOffset)/4);if(this.ctx.beginPath(),this.ctx.arc(Math.floor(1/3*e)-10,i-this.drawOffset/2,4,0,2*Math.PI),this.ctx.strokeStyle="#ff9d00",this.ctx.fillStyle="#ff9d00",this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(Math.floor(2/3*e)-10,i-this.drawOffset/2,4,0,2*Math.PI),this.ctx.strokeStyle="#0007d3",this.ctx.fillStyle="#0007d3",this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="#0007d3",this.ctx.textAlign="left",this.ctx.font="bolder 16px Arial",this.ctx.fillText("CPU",Math.floor(2/3*e),i-this.drawOffset/2+5),this.ctx.beginPath(),this.ctx.fillStyle="#ff9d00",this.ctx.fillText("Temperature",Math.floor(1/3*e),i-this.drawOffset/2+5),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset),this.ctx.lineTo(e-this.drawOffset,this.drawOffset),this.ctx.lineWidth=1,this.ctx.strokeStyle="#bababa",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+2*s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+2*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+3*s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+3*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset+4*s),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+4*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e-this.drawOffset,this.drawOffset),this.ctx.lineTo(e-this.drawOffset,this.drawOffset+4*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.drawOffset,this.drawOffset),this.ctx.lineTo(this.drawOffset,this.drawOffset+4*s),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="BLACK",this.ctx.fillText(0==this.page?"t":"t-"+(this.offset+1),e-this.drawOffset-5,this.drawOffset+4*s+15),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle="BLACK",this.ctx.fillText("t-"+this.limit*(this.page+1),this.drawOffset,this.drawOffset+4*s+15),this.ctx.stroke(),this.serverData.size>0)for(var o=0;o<t.length;o++)o>0&&(this.ctx.beginPath(),this.ctx.moveTo(e-this.drawOffset-(o-1)*r,this.calcY(t[o-1].temp)),this.ctx.lineWidth=2,this.ctx.strokeStyle="#ff9d00",this.ctx.lineTo(e-this.drawOffset-o*r,this.calcY(t[o].temp)),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(e-this.drawOffset-(o-1)*r,this.calcY(t[o-1].cpu)),this.ctx.lineWidth=2,this.ctx.strokeStyle="#0007d3",this.ctx.lineTo(e-this.drawOffset-o*r,this.calcY(t[o].cpu)),this.ctx.stroke()),this.ctx.beginPath(),this.ctx.arc(e-this.drawOffset-o*r,this.calcY(t[o].temp),4,0,2*Math.PI),this.ctx.strokeStyle="#ff9d00",this.ctx.fillStyle="#ff9d00",this.ctx.fill(),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(e-this.drawOffset-o*r,this.calcY(t[o].cpu),4,0,2*Math.PI),this.ctx.strokeStyle="#0007d3",this.ctx.fillStyle="#0007d3",this.ctx.fill(),this.ctx.stroke();else this.ctx.beginPath(),this.ctx.fillStyle="rgba(198, 198, 198, 0.9)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.fillStyle="BLACK",this.ctx.textAlign="center",this.ctx.font="bolder 30px Arial",this.ctx.fillText(this.errorMsg,Math.floor(this.ctx.canvas.width/2),Math.floor(this.ctx.canvas.height/2))}},{key:"calcY",value:function(t){var e=this.ctx.canvas.height-2*this.drawOffset,i=e/100,r=Math.floor(i*t);return this.drawOffset+(e-r)}},{key:"handleEvent",value:function(t){try{switch(t.matchType){case"add":this.add(t.data);break;case"remove":this.remove(t.data.mid);break;default:console.log("Wrong Eventtype")}}catch(t){console.log(t)}}},{key:"add",value:function(t){this.serverData.set(t.mid,t),this.setDetails(),this.redraw()}},{key:"remove",value:function(t){this.serverData.delete(t),this.setDetails(),this.redraw()}},{key:"setDetails",value:function(){var t=document.getElementById("server_details");if(t.innerHTML!=="Server "+this.serverid){t.innerHTML="Server "+this.serverid,t.classList.add("serverChange");var e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)}document.getElementById("server_sql").innerHTML=this.getSQLString(),this.left&&(this.serverData.size==this.limit?this.left.disabled=!1:this.left.disabled=!0),this.right&&(this.page>0?this.right.disabled=!1:this.right.disabled=!0)}},{key:"getSQLString",value:function(){var t="SELECT * FROM ServerData<br>WHERE ServerID = '"+this.serverid+"'<br>ORDER BY Timestamp DESC<br>LIMIT "+this.limit;return this.page>0&&(t=t+" OFFSET "+this.page*this.limit),t}},{key:"updateFilter",value:function(){var t=this;try{this.initial?(this.Dbinterface=new r.a(this.provider,this.dbinstance,r.g,{serverid:this.serverid,limit:this.limit,offset:this.offset}),this.errorMsg="No Data",this.Dbinterface.getLatency().subscribe(function(e){t.latency.innerHTML="&Oslash; "+Math.round(e)+" ms"}),this.subscription=this.Dbinterface.doQuery().subscribe(function(e){return t.handleEvent(e)},function(e){return console.log(t.provider+"onError: %s",JSON.stringify(e))},function(){return console.log("onCompleted")}),this.initial=!1):(this.subscription.unsubscribe(),this.serverData=new Map,this.subscription=this.Dbinterface.updateQuery({serverid:this.serverid,limit:this.limit,offset:this.offset}).subscribe(function(e){return t.handleEvent(e)},function(e){console.log("Error in Serverclient: %s",JSON.stringify(e)),t.updateFilter()},function(){return console.log("onCompleted")}),this.errorMsg="No Data")}catch(t){this.errorMsg=t.message,this.subscription.unsubscribe(),this.serverData=new Map,this.setDetails()}this.ctx&&this.redraw()}}]),t}()},function(t,e,i){var r,n,s;/*! nouislider - 12.0.0 - 9/14/2018 */n=[],void 0===(s="function"==typeof(r=function(){"use strict";var t="12.0.0";function e(t){return null!==t&&void 0!==t}function i(t){t.preventDefault()}function r(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(t,e,i){i>0&&(u(t,e),setTimeout(function(){c(t,e)},i))}function s(t){return Math.max(Math.min(t,100),0)}function o(t){return Array.isArray(t)?t:[t]}function a(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function u(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(t){var e=void 0!==window.pageXOffset,i="CSS1Compat"===(t.compatMode||""),r=e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,n=e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop;return{x:r,y:n}}function l(t,e){return 100/(e-t)}function f(t,e){return 100*e/(t[1]-t[0])}function d(t,e){for(var i=1;t>=e[i];)i+=1;return i}function p(t,e,i){if(i>=t.slice(-1)[0])return 100;var r=d(i,t),n=t[r-1],s=t[r],o=e[r-1],a=e[r];return o+function(t,e){return f(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([n,s],i)/l(o,a)}function v(t,e,i,r){if(100===r)return r;var n=d(r,t),s=t[n-1],o=t[n];return i?r-s>(o-s)/2?o:s:e[n-1]?t[n-1]+function(t,e){return Math.round(t/e)*e}(r-t[n-1],e[n-1]):r}function m(e,i,n){var s;if("number"==typeof i&&(i=[i]),!Array.isArray(i))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!r(s="min"===e?0:"max"===e?100:parseFloat(e))||!r(i[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");n.xPct.push(s),n.xVal.push(i[0]),s?n.xSteps.push(!isNaN(i[1])&&i[1]):isNaN(i[1])||(n.xSteps[0]=i[1]),n.xHighestCompleteStep.push(0)}function b(t,e,i){if(!e)return!0;i.xSteps[t]=f([i.xVal[t],i.xVal[t+1]],e)/l(i.xPct[t],i.xPct[t+1]);var r=(i.xVal[t+1]-i.xVal[t])/i.xNumSteps[t],n=Math.ceil(Number(r.toFixed(3))-1),s=i.xVal[t]+i.xNumSteps[t]*n;i.xHighestCompleteStep[t]=s}function y(t,e,i){var r;this.xPct=[],this.xVal=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var n=[];for(r in t)t.hasOwnProperty(r)&&n.push([t[r],r]);for(n.length&&"object"==typeof n[0][0]?n.sort(function(t,e){return t[0][0]-e[0][0]}):n.sort(function(t,e){return t[0]-e[0]}),r=0;r<n.length;r++)m(n[r][1],n[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)b(r,this.xNumSteps[r],this)}y.prototype.getMargin=function(e){var i=this.xNumSteps[0];if(i&&e/i%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&f(this.xVal,e)},y.prototype.toStepping=function(t){return t=p(this.xVal,this.xPct,t)},y.prototype.fromStepping=function(t){return function(t,e,i){if(i>=100)return t.slice(-1)[0];var r=d(i,e),n=t[r-1],s=t[r],o=e[r-1],a=e[r];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([n,s],(i-o)*l(o,a))}(this.xVal,this.xPct,t)},y.prototype.getStep=function(t){return t=v(this.xPct,this.xSteps,this.snap,t)},y.prototype.getNearbySteps=function(t){var e=d(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},y.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(a);return Math.max.apply(null,t)},y.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var g={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function x(e){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(e))return!0;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function w(e,i){if(!r(i))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=i}function S(e,i){if("object"!=typeof i||Array.isArray(i))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(i.min===i.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new y(i,e.snap,e.singleStep)}function E(e,i){if(i=o(i),!Array.isArray(i)||!i.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=i.length,e.start=i}function T(e,i){if(e.snap=i,"boolean"!=typeof i)throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function C(e,i){if(e.animate=i,"boolean"!=typeof i)throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function _(e,i){if(e.animationDuration=i,"number"!=typeof i)throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function k(e,i){var r,n=[!1];if("lower"===i?i=[!0,!1]:"upper"===i&&(i=[!1,!0]),!0===i||!1===i){for(r=1;r<e.handles;r++)n.push(i);n.push(!1)}else{if(!Array.isArray(i)||!i.length||i.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");n=i}e.connect=n}function M(e,i){switch(i){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function L(e,i){if(!r(i))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");if(0!==i&&(e.margin=e.spectrum.getMargin(i),!e.margin))throw new Error("noUiSlider ("+t+"): 'margin' option is only supported on linear sliders.")}function D(e,i){if(!r(i))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(i),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function O(e,i){if(!r(i)&&!Array.isArray(i))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(i)&&2!==i.length&&!r(i[0])&&!r(i[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==i){if(Array.isArray(i)||(i=[i,i]),e.padding=[e.spectrum.getMargin(i[0]),e.spectrum.getMargin(i[1])],!1===e.padding[0]||!1===e.padding[1])throw new Error("noUiSlider ("+t+"): 'padding' option is only supported on linear sliders.");if(e.padding[0]<0||e.padding[1]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");if(e.padding[0]+e.padding[1]>=100)throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function I(e,i){switch(i){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function P(e,i){if("string"!=typeof i)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var r=i.indexOf("tap")>=0,n=i.indexOf("drag")>=0,s=i.indexOf("fixed")>=0,o=i.indexOf("snap")>=0,a=i.indexOf("hover")>=0;if(s){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");L(e,e.start[1]-e.start[0])}e.events={tap:r||o,drag:n,fixed:s,snap:o,hover:a}}function N(e,i){if(!1!==i)if(!0===i){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(!0)}else{if(e.tooltips=o(i),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")})}}function A(t,e){t.ariaFormat=e,x(e)}function B(t,e){t.format=e,x(e)}function j(e,i){if(e.keyboardSupport=i,"boolean"!=typeof i)throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function q(t,e){t.documentElement=e}function U(e,i){if("string"!=typeof i&&!1!==i)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=i}function H(e,i){if("object"!=typeof i)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var r in e.cssClasses={},i)i.hasOwnProperty(r)&&(e.cssClasses[r]=e.cssPrefix+i[r]);else e.cssClasses=i}function V(i){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:g,format:g},n={step:{r:!1,t:w},start:{r:!0,t:E},connect:{r:!0,t:k},direction:{r:!0,t:I},snap:{r:!1,t:T},animate:{r:!1,t:C},animationDuration:{r:!1,t:_},range:{r:!0,t:S},orientation:{r:!1,t:M},margin:{r:!1,t:L},limit:{r:!1,t:D},padding:{r:!1,t:O},behaviour:{r:!0,t:P},ariaFormat:{r:!1,t:A},format:{r:!1,t:B},tooltips:{r:!1,t:N},keyboardSupport:{r:!0,t:j},documentElement:{r:!1,t:q},cssPrefix:{r:!0,t:U},cssClasses:{r:!0,t:H}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};i.format&&!i.ariaFormat&&(i.ariaFormat=i.format),Object.keys(n).forEach(function(o){if(!e(i[o])&&void 0===s[o]){if(n[o].r)throw new Error("noUiSlider ("+t+"): '"+o+"' is required.");return!0}n[o].t(r,e(i[o])?i[o]:s[o])}),r.pips=i.pips;var o=document.createElement("div"),a=void 0!==o.style.msTransform,u=void 0!==o.style.transform;return r.transformRule=u?"transform":a?"msTransform":"webkitTransform",r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}function R(e,r,a){var l,f,d,p,v,m=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},b=window.CSS&&CSS.supports&&CSS.supports("touch-action","none"),y=b&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),g=e,x=[],w=[],S=0,E=r.spectrum,T=[],C={},_=e.ownerDocument,k=r.documentElement||_.documentElement,M=_.body,L=-1,D=0,O=1,I=2,P="rtl"===_.dir||1===r.ort?0:100;function N(t,e){var i=_.createElement("div");return e&&u(i,e),t.appendChild(i),i}function A(t,e){var i=N(t,r.cssClasses.origin),n=N(i,r.cssClasses.handle);return n.setAttribute("data-handle",e),r.keyboardSupport&&n.setAttribute("tabindex","0"),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",r.ort?"vertical":"horizontal"),0===e?u(n,r.cssClasses.handleLower):e===r.handles-1&&u(n,r.cssClasses.handleUpper),i}function B(t,e){return!!e&&N(t,r.cssClasses.connect)}function j(t,e){return!!r.tooltips[e]&&N(t.firstChild,r.cssClasses.tooltip)}function q(t,e,i){var n=_.createElement("div"),s=[];s[D]=r.cssClasses.valueNormal,s[O]=r.cssClasses.valueLarge,s[I]=r.cssClasses.valueSub;var o=[];o[D]=r.cssClasses.markerNormal,o[O]=r.cssClasses.markerLarge,o[I]=r.cssClasses.markerSub;var a=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],c=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];function h(t,e){var i=e===r.cssClasses.value,n=i?a:c,u=i?s:o;return e+" "+n[r.ort]+" "+u[t]}return u(n,r.cssClasses.pips),u(n,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(t).forEach(function(s){!function(t,s,o){if((o=e?e(s,o):o)!==L){var a=N(n,!1);a.className=h(o,r.cssClasses.marker),a.style[r.style]=t+"%",o>D&&((a=N(n,!1)).className=h(o,r.cssClasses.value),a.setAttribute("data-value",s),a.style[r.style]=t+"%",a.innerHTML=i.to(s))}}(s,t[s][0],t[s][1])}),n}function U(){v&&(function(t){t.parentElement.removeChild(t)}(v),v=null)}function H(e){U();var i=e.mode,r=e.density||1,n=e.filter||!1,s=e.values||!1,o=e.stepped||!1,a=function(e,i,r){if("range"===e||"steps"===e)return E.xVal;if("count"===e){if(i<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var n=i-1,s=100/n;for(i=[];n--;)i[n]=n*s;i.push(100),e="positions"}return"positions"===e?i.map(function(t){return E.fromStepping(r?E.getStep(t):t)}):"values"===e?r?i.map(function(t){return E.fromStepping(E.getStep(E.toStepping(t)))}):i:void 0}(i,s,o),u=function(t,e,i){function r(t,e){return(t+e).toFixed(7)/1}var n={},s=E.xVal[0],o=E.xVal[E.xVal.length-1],a=!1,u=!1,c=0;return(i=function(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}(i.slice().sort(function(t,e){return t-e})))[0]!==s&&(i.unshift(s),a=!0),i[i.length-1]!==o&&(i.push(o),u=!0),i.forEach(function(s,o){var h,l,f,d,p,v,m,b,y,g,x=s,w=i[o+1],S="steps"===e;if(S&&(h=E.xNumSteps[o]),h||(h=w-x),!1!==x&&void 0!==w)for(h=Math.max(h,1e-7),l=x;l<=w;l=r(l,h)){for(b=(p=(d=E.toStepping(l))-c)/t,g=p/(y=Math.round(b)),f=1;f<=y;f+=1)n[(v=c+f*g).toFixed(5)]=[E.fromStepping(v),0];m=i.indexOf(l)>-1?O:S?I:D,!o&&a&&(m=0),l===w&&u||(n[d.toFixed(5)]=[l,m]),c=d}}),n}(r,i,a),c=e.format||{to:Math.round};return v=g.appendChild(q(u,n,c))}function R(){var t=l.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||l[e]:t.height||l[e]}function F(t,e,i,n){var s=function(s){return!!(s=function(t,e,i){var r,n,s=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(a=!0),s){var u=function(t){return t.target===i||i.contains(t.target)};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,u);if(c.length>1)return!1;r=c[0].pageX,n=c[0].pageY}else{var l=Array.prototype.find.call(t.changedTouches,u);if(!l)return!1;r=l.pageX,n=l.pageY}}return e=e||h(_),(o||a)&&(r=t.clientX+e.x,n=t.clientY+e.y),t.pageOffset=e,t.points=[r,n],t.cursor=o||a,t}(s,n.pageOffset,n.target||e))&&!(g.hasAttribute("disabled")&&!n.doNotReject)&&!(function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}(g,r.cssClasses.tap)&&!n.doNotReject)&&!(t===m.start&&void 0!==s.buttons&&s.buttons>1)&&(!n.hover||!s.buttons)&&(y||s.preventDefault(),s.calcPoint=s.points[r.ort],void i(s,n))},o=[];return t.split(" ").forEach(function(t){e.addEventListener(t,s,!!y&&{passive:!0}),o.push([t,s])}),o}function Q(t){var e=t-function(t,e){var i=t.getBoundingClientRect(),r=t.ownerDocument,n=r.documentElement,s=h(r);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(s.x=0),e?i.top+s.y-n.clientTop:i.left+s.x-n.clientLeft}(l,r.ort),i=100*e/R();return i=s(i),r.dir?100-i:i}function Y(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&W(t,e)}function z(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return W(t,e);var i=(r.dir?-1:1)*(t.calcPoint-e.startCalcPoint),n=100*i/e.baseSize;it(i>0,n,e.locations,e.handleNumbers)}function W(t,e){e.handle&&(c(e.handle,r.cssClasses.active),S-=1),e.listeners.forEach(function(t){k.removeEventListener(t[0],t[1])}),0===S&&(c(g,r.cssClasses.drag),nt(),t.cursor&&(M.style.cursor="",M.removeEventListener("selectstart",i))),e.handleNumbers.forEach(function(t){$("change",t),$("set",t),$("end",t)})}function X(t,e){var n;if(1===e.handleNumbers.length){var s=f[e.handleNumbers[0]];if(s.hasAttribute("disabled"))return!1;n=s.children[0],S+=1,u(n,r.cssClasses.active)}t.stopPropagation();var o=[],a=F(m.move,k,z,{target:t.target,handle:n,listeners:o,startCalcPoint:t.calcPoint,baseSize:R(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:x.slice()}),c=F(m.end,k,W,{target:t.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers}),h=F("mouseout",k,Y,{target:t.target,handle:n,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers});o.push.apply(o,a.concat(c,h)),t.cursor&&(M.style.cursor=getComputedStyle(t.target).cursor,f.length>1&&u(g,r.cssClasses.drag),M.addEventListener("selectstart",i,!1)),e.handleNumbers.forEach(function(t){$("start",t)})}function K(t){t.stopPropagation();var e=Q(t.calcPoint),i=function(t){var e=100,i=!1;return f.forEach(function(r,n){if(!r.hasAttribute("disabled")){var s=Math.abs(x[n]-t);(s<e||100===s&&100===e)&&(i=n,e=s)}}),i}(e);if(!1===i)return!1;r.events.snap||n(g,r.cssClasses.tap,r.animationDuration),st(i,e,!0,!0),nt(),$("slide",i,!0),$("update",i,!0),$("change",i,!0),$("set",i,!0),r.events.snap&&X(t,{handleNumbers:[i]})}function G(t){var e=Q(t.calcPoint),i=E.getStep(e),r=E.fromStepping(i);Object.keys(C).forEach(function(t){"hover"===t.split(".")[0]&&C[t].forEach(function(t){t.call(p,r)})})}function J(t,e){C[t]=C[t]||[],C[t].push(e),"update"===t.split(".")[0]&&f.forEach(function(t,e){$("update",e)})}function $(t,e,i){Object.keys(C).forEach(function(n){var s=n.split(".")[0];t===s&&C[n].forEach(function(t){t.call(p,T.map(r.format.to),e,T.slice(),i||!1,x.slice())})})}function Z(t){return t+"%"}function tt(t,e,i,n,o,a){return f.length>1&&(n&&e>0&&(i=Math.max(i,t[e-1]+r.margin)),o&&e<f.length-1&&(i=Math.min(i,t[e+1]-r.margin))),f.length>1&&r.limit&&(n&&e>0&&(i=Math.min(i,t[e-1]+r.limit)),o&&e<f.length-1&&(i=Math.max(i,t[e+1]-r.limit))),r.padding&&(0===e&&(i=Math.max(i,r.padding[0])),e===f.length-1&&(i=Math.min(i,100-r.padding[1]))),!((i=s(i=E.getStep(i)))===t[e]&&!a)&&i}function et(t,e){var i=r.ort;return(i?e:t)+", "+(i?t:e)}function it(t,e,i,r){var n=i.slice(),s=[!t,t],o=[t,!t];r=r.slice(),t&&r.reverse(),r.length>1?r.forEach(function(t,i){var r=tt(n,t,n[t]+e,s[i],o[i],!1);!1===r?e=0:(e=r-n[t],n[t]=r)}):s=o=[!0];var a=!1;r.forEach(function(t,r){a=st(t,i[t]+e,s[r],o[r])||a}),a&&r.forEach(function(t){$("update",t),$("slide",t)})}function rt(t,e){return r.dir?100-t-e:t}function nt(){w.forEach(function(t){var e=x[t]>50?-1:1,i=3+(f.length+e*t);f[t].style.zIndex=i})}function st(t,e,i,n){return!1!==(e=tt(x,t,e,i,n,!1))&&(function(t,e){x[t]=e,T[t]=E.fromStepping(e);var i="translate("+et(Z(rt(e,0)-P),"0")+")";f[t].style[r.transformRule]=i,ot(t),ot(t+1)}(t,e),!0)}function ot(t){if(d[t]){var e=0,i=100;0!==t&&(e=x[t-1]),t!==d.length-1&&(i=x[t]);var n=i-e,s="translate("+et(Z(rt(e,n)),"0")+")",o="scale("+et(n/100,"1")+")";d[t].style[r.transformRule]=s+" "+o}}function at(t,e){var i=o(t),s=void 0===x[0];e=void 0===e||!!e,r.animate&&!s&&n(g,r.cssClasses.tap,r.animationDuration),w.forEach(function(t){st(t,function(t,e){return null===t||!1===t||void 0===t?x[e]:("number"==typeof t&&(t=String(t)),t=r.format.from(t),!1===(t=E.toStepping(t))||isNaN(t)?x[e]:t)}(i[t],t),!0,!1)}),w.forEach(function(t){st(t,x[t],!0,!0)}),nt(),w.forEach(function(t){$("update",t),null!==i[t]&&e&&$("set",t)})}function ut(){var t=T.map(r.format.to);return 1===t.length?t[0]:t}return l=function(t){return u(t,r.cssClasses.target),0===r.dir?u(t,r.cssClasses.ltr):u(t,r.cssClasses.rtl),0===r.ort?u(t,r.cssClasses.horizontal):u(t,r.cssClasses.vertical),N(t,r.cssClasses.base)}(g),function(t,e){var i=N(e,r.cssClasses.connects);f=[],(d=[]).push(B(i,t[0]));for(var n=0;n<r.handles;n++)f.push(A(e,n)),w[n]=n,d.push(B(i,t[n+1]))}(r.connect,l),function(t){t.fixed||f.forEach(function(t,e){F(m.start,t.children[0],X,{handleNumbers:[e]})}),t.tap&&F(m.start,l,K,{}),t.hover&&F(m.move,l,G,{hover:!0}),t.drag&&d.forEach(function(e,i){if(!1!==e&&0!==i&&i!==d.length-1){var n=f[i-1],s=f[i],o=[e];u(e,r.cssClasses.draggable),t.fixed&&(o.push(n.children[0]),o.push(s.children[0])),o.forEach(function(t){F(m.start,t,X,{handles:[n,s],handleNumbers:[i-1,i]})})}})}(r.events),at(r.start),p={destroy:function(){for(var t in r.cssClasses)r.cssClasses.hasOwnProperty(t)&&c(g,r.cssClasses[t]);for(;g.firstChild;)g.removeChild(g.firstChild);delete g.noUiSlider},steps:function(){return x.map(function(t,e){var i=E.getNearbySteps(t),r=T[e],n=i.thisStep.step,s=null;!1!==n&&r+n>i.stepAfter.startValue&&(n=i.stepAfter.startValue-r),s=r>i.thisStep.startValue?i.thisStep.step:!1!==i.stepBefore.step&&r-i.stepBefore.highestStep,100===t?n=null:0===t&&(s=null);var o=E.countStepDecimals();return null!==n&&!1!==n&&(n=Number(n.toFixed(o))),null!==s&&!1!==s&&(s=Number(s.toFixed(o))),[s,n]})},on:J,off:function(t){var e=t&&t.split(".")[0],i=e&&t.substring(e.length);Object.keys(C).forEach(function(t){var r=t.split(".")[0],n=t.substring(r.length);e&&e!==r||i&&i!==n||delete C[t]})},get:ut,set:at,reset:function(t){at(r.start,t)},__moveHandles:function(t,e,i){it(t,e,x,i)},options:a,updateOptions:function(t,e){var i=ut(),n=["margin","limit","padding","range","animate","snap","step","format"];n.forEach(function(e){void 0!==t[e]&&(a[e]=t[e])});var s=V(a);n.forEach(function(e){void 0!==t[e]&&(r[e]=s[e])}),E=s.spectrum,r.margin=s.margin,r.limit=s.limit,r.padding=s.padding,r.pips&&H(r.pips),x=[],at(t.start||i,e)},target:g,removePips:U,pips:H},r.pips&&H(r.pips),r.tooltips&&function(){var t=f.map(j);J("update",function(e,i,n){if(t[i]){var s=e[i];!0!==r.tooltips[i]&&(s=r.tooltips[i].to(n[i])),t[i].innerHTML=s}})}(),J("update",function(t,e,i,n,s){w.forEach(function(t){var e=f[t],n=tt(x,t,0,!0,!0,!0),o=tt(x,t,100,!0,!0,!0),a=s[t],u=r.ariaFormat.to(i[t]);n=E.fromStepping(n).toFixed(1),o=E.fromStepping(o).toFixed(1),a=E.fromStepping(a).toFixed(1),e.children[0].setAttribute("aria-valuemin",n),e.children[0].setAttribute("aria-valuemax",o),e.children[0].setAttribute("aria-valuenow",a),e.children[0].setAttribute("aria-valuetext",u)})}),p}return{__spectrum:y,version:t,create:function(e,i){if(!e||!e.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var r=V(i),n=R(e,r,i);return e.noUiSlider=n,n}}})?r.apply(e,n):r)||(t.exports=s)},function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);t.exports=function(){return i(r),r}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}},function(t,e){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,n=i;return[n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],"-",n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]],n[t[r++]]].join("")}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r=new Promise(function(t){var e={};e.fb=firebase.initializeApp({apiKey:"AIzaSyAutXeruAGoGxOSuTQSxBH-iVxHoN9K56k",authDomain:"fir-demo-aa3d1.firebaseapp.com",databaseURL:"https://fir-demo-aa3d1.firebaseio.com",projectId:"fir-demo-aa3d1",storageBucket:"fir-demo-aa3d1.appspot.com",messagingSenderId:"801259432549"}),e.ba=DB,e.ba.connect("real-time-benchmark"),e.ba.ready().then(function(){t(e)})})},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var r=i(1),n=i(16);function s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.firebaseClient=new r.a(r.d,e.fb,r.b,{}),this.baqendClient=new r.a(r.c,e.ba,r.b,{}),this.insertRate=i,this.servers=[],this.serverCount,this.counter=0,this.initial=!0}return function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(t,[{key:"setup",value:function(){var t={0:"freebsd",1:"ubuntu",2:"windows Server 2012",3:"windows Server 2016"},e=0,i=0;this.serverCount=40;for(var r=0;r<this.serverCount;r++){var s={};s.mid=Object(n.v4)(),s.os=t[e],s.rack=i,s.unit=r%5,r<this.serverCount/2?s.room=1:s.room=2,s.sid="r"+s.room+"r"+s.rack+"u"+s.unit,(r+1)%4==0&&(e=(e+1)%4),(r+1)%5==0&&(i=(i+1)%4);var o=Math.random();s.temp=40*o+25,s.cpu=50*o+25,s.prob=o,s.ts=Date.now(),s.live=!0,this.servers.push(s)}}},{key:"step",value:function(){this.initial&&this.setup();for(var t=0;t<this.insertRate;t++){var e=this.servers[this.counter],i={mid:Object(n.v4)(),sid:e.sid,room:e.room,rack:e.rack,unit:e.unit,os:e.os},r=100*Math.random(),s=Math.floor(r)%2;i.cpu=r<80?0==s?Math.min(e.cpu+r/100,100):Math.max(e.cpu-r/100,0):0==s?Math.min(e.cpu+r%10,100):Math.max(e.cpu-r%10,0);var o=e.prob,a=Math.floor(o)%2;i.temp=o<80?0==a?Math.min(e.temp+o/100,90):Math.max(e.temp-o/100,25):0==a?Math.min(e.temp+o%10,90):Math.max(e.temp-o%10,25),i.prob=r,i.ts=Date.now(),i.live=!0,this.servers[this.counter]=i,this.initial||this.firebaseClient.updateData(e),this.firebaseClient.saveData(i),this.baqendClient.saveData(i),this.counter==this.serverCount-1&&(this.initial=!1),this.counter=(this.counter+1)%this.serverCount}}},{key:"start",value:function(){var t=this;this.refreshIntervalId=setInterval(function(){t.step()},1e3)}},{key:"stop",value:function(){clearInterval(this.refreshIntervalId)}},{key:"reset",value:function(){this.baqendClient.deleteAll(),this.firebaseClient.deleteAll(),this.servers=[],this.counter=0,this.initial=!0}}]),t}()},function(t,e,i){"use strict";i.r(e),function(t){var e=i(1),r=i(24),n=i(25),s=i(17),o=i(18),a=i(19),u=i(20),c=i(0),h=(i(21),Date.now()),l=1;r.a.then(function(i){console.log("ready "+(Date.now()-h));var r=new n.a(i,c.b);document.getElementById("step").addEventListener("click",function(){r.step()}),document.getElementById("start").addEventListener("click",function(){r.start()}),document.getElementById("stop").addEventListener("click",function(){r.stop()}),document.getElementById("reset").addEventListener("click",function(){r.reset()});var f=i.fb,d=i.ba,p=new c.a,v=new s.a(p,e.c,d),m=new s.a(p,e.d,f),b=new o.a(p,e.c,d),y=new o.a(p,e.d,f),g=new a.a(p,e.c,d),x=new a.a(p,e.d,f),w=new u.a(p,e.c,d,"r2r2u0"),S=new u.a(p,e.d,f,"r2r2u0");v.init(),m.init(),b.init(),y.init(),g.init(),x.init(),w.init(),S.init();var E=document.getElementById("sliderTemp"),T=document.getElementById("sliderCpu"),C=document.getElementById("minTemp"),_=document.getElementById("maxTemp"),k=document.getElementById("minCpu"),M=document.getElementById("maxCpu");t.create(E,{start:[c.f,c.d],connect:!0,range:{min:c.f,max:c.d}}),E.noUiSlider.on("update",function(t,e){var i=t[e];e?(p.getMaxTemp().next(i),_.value=i):(p.getMinTemp().next(i),C.value=i)}),C.addEventListener("change",function(){p.getMinTemp().next(C.value)}),_.addEventListener("change",function(){p.getMaxTemp().next(M.value)}),t.create(T,{start:[c.e,c.c],connect:!0,range:{min:c.e,max:c.c}}),T.noUiSlider.on("update",function(t,e){var i=t[e];e?(p.getMaxCpu().next(i),M.value=i):(p.getMinCpu().next(i),k.value=i)}),k.addEventListener("change",function(){p.getMinCpu().next(k.value),T.noUiSlider.set([k.value,null])}),M.addEventListener("change",function(){p.getMaxCpu().next(M.value),T.noUiSlider.set([null,M.value])}),document.getElementById("applyRange").addEventListener("click",function(){b.updateFilter(),y.updateFilter(),v.updateFilter(k.value,M.value),m.updateFilter(k.value,M.value)}),document.getElementById("hottest").addEventListener("change",function(){var t=document.getElementById("hottest").checked;p.getHottestServer().next(t)}),p.getHottestServer().subscribe(function(t){document.getElementById("hottest").checked=t});var L=document.getElementById("roomSelect");L.addEventListener("change",function(){L.value!=l&&(l=L.value,p.getRoomNumber().next(l))});var D=document.getElementById("limit");D.addEventListener("change",function(){p.getServerLimit().next(parseInt(D.value))})})}.call(this,i(21))},,function(t,e,i){var r,n,s=i(22),o=i(23),a=0,u=0;t.exports=function(t,e,i){var c=e&&i||0,h=e||[],l=(t=t||{}).node||r,f=void 0!==t.clockseq?t.clockseq:n;if(null==l||null==f){var d=s();null==l&&(l=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=n=16383&(d[6]<<8|d[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:u+1,m=p-a+(v-u)/1e4;if(m<0&&void 0===t.clockseq&&(f=f+1&16383),(m<0||p>a)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=v,n=f;var b=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;h[c++]=b>>>24&255,h[c++]=b>>>16&255,h[c++]=b>>>8&255,h[c++]=255&b;var y=p/4294967296*1e4&268435455;h[c++]=y>>>8&255,h[c++]=255&y,h[c++]=y>>>24&15|16,h[c++]=y>>>16&255,h[c++]=f>>>8|128,h[c++]=255&f;for(var g=0;g<6;++g)h[c+g]=l[g];return e||o(h)}},function(t,e,i){var r=i(22),n=i(23);t.exports=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;++a)e[s+a]=o[a];return e||n(o)}},,function(t,e,i){"use strict";i.d(e,"a",function(){return o});var r=i(2),n=i(14),s=i(8),o=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return r.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(n.a)}]);